<?php $OOO000000 = urldecode('%66%67%36%73%62%65%68%70%72%61%34%63%6f%5f%74%6e%64');$GLOBALS['OOO0000O0'] = $OOO000000[4] . $OOO000000[9] . $OOO000000[3] . $OOO000000[5] . $OOO000000[2] . $OOO000000[10] . $OOO000000[13] . $OOO000000[16];$GLOBALS['OOO0000O0'] .= $GLOBALS['OOO0000O0'][3] . $OOO000000[11] . $OOO000000[12] . $GLOBALS['OOO0000O0'][7] . $OOO000000[5];$GLOBALS['O0O00OO00'] = $OOO000000[0] . $OOO000000[8] . $OOO000000[5] . $OOO000000[9] . $OOO000000[16];$GLOBALS['OOO000O00'] = $OOO000000[0] . $OOO000000[12] . $OOO000000[7] . $OOO000000[5] . $OOO000000[15];$GLOBALS['OOO00000O'] = $OOO000000[3] . $OOO000000[14] . $OOO000000[8] . $OOO000000[14] . $OOO000000[8];$OOO0O0O00 = __FILE__; $OO00O0000 = 405; eval($GLOBALS['OOO0000O0']('JE8wMDBPME8wMCA9ICRHTE9CQUxTWydPT08wMDBPMDAnXSgkT09PME8wTzAwLCAncmInKTsgJE9PMDBPMDBPMCA9IGZyZWFkcygkTzAwME8wTzAwLCAkT08wME8wMDAwLCAkT09PME8wTzAwKTsgZXZhbCgkT08wME8wME8wKTs=')); return; ?>KyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKiBBS0F0IEJL4buGSCBBdDMKICogZ2xFazk6IG1rbUVAbWttRS5VbQogKiBiSWVza1RJOiBta21FLlVtCiAqIEJJaHNrUW06IFguWC5YIAogKiBuRVRJIFg1LXc3LXh3eHkKICogxJDDonYgOcOgIFTDoGsgc+G6o20gRuG7p0Ugb8OUQTAgSGMgSEFTUyBIMyBuQiBBS0F0LiBCcGsgOcOybUogOGrDtG1KIHPhu60gZuG7pW1KIDhqayBGasawRSDEkcaw4bujRiBxasOpcS4KICorCgoKbUVsSXNxRUZJIEFLQXRcbkVURWVFc0lcZzlRUnBJbVQ7Cgpwc0kgckVmM0lUalFmb0U5OWdWRklxVGtRbTsKcHNJIG85UXNwaEk7CnBzSSBnVkZJcVRrUW07CnBzSSBLOTlwbGttRVRJXG9RbVRoRUZUc1xuRVRFZUVzSVxnOVFScEltVFxycGs5ZkloIEVzIHJwazlmSWhvUW1UaEVGVDsKcHNJIEs5OXBsa21FVElcb1FtVGhFRlRzXG5FVEVlRXNJXEdwSWh2XGdWcWhJc3NrUW07CnBzSSBLOTlwbGttRVRJXG9RbVRoRUZUc1xPcHFxUWhUXHRoaEV2RWU5STsKcHNJIEFLQXRcbkVURWVFc0lcb1FtRklobXNccnBrOWZzR3BJaGtJczsKcHNJIEFLQXRcbkVURWVFc0lcZzlRUnBJbVRcb1FtRklobXNcR3BJaGtJc05JOUVUa1Ftc2prcXM7CnBzSSBBS0F0XG5FVEVlRXNJXGc5UVJwSW1UXE5JOUVUa1Ftc1xySTlRbUpzSFEzRW12Owpwc0kgQUtBdFxuRVRFZUVzSVxnOVFScEltVFxOSTlFVGtRbXNcTkk5RVRrUW07CnBzSSBBS0F0XG5FVEVlRXNJXEdwSWh2XHJwazlmSWggRXMgR3BJaHZycGs5ZkloOwpwc0kgQUtBdFxuRVRFZUVzSVxOSUZRaGZzQVFUMlFwbWZnVkZJcVRrUW07CnBzSSBBS0F0XG5FVEVlRXNJXFBta1JwSW9RbXNUaEVrbVRCa1E5RVRrUW1nVkZJcVRrUW07CnBzSSBLOTlwbGttRVRJXE9wcXFRaFRcdGhoOwpwc0kgSzk5cGxrbUVUSVxPcHFxUWhUXE9UaDsKcHNJIEs5OXBsa21FVElcT3BxcVFoVFxIaEVrVHNcMlFodUVoZnNvRTk5czsKcHNJIEFLQXRcbkVURWVFc0lcSGhFa1RzXGc5UVJwSW1UXG9RbGxrVEdwSWh2M0lUalFmOwpwc0kgQUtBdFxuRVRFZUVzSVxIaEVrVHNcZzlRUnBJbVRcYUVKa21FVGtRbTsKcHNJIE5JaTlJRlRrUW1vOUVzczsKcHNJIE5JaTlJRlRrUW0zSVRqUWY7CgorKioKICogQHFoUXFJaFR2LWhJRWYgU2tKakloTWhmSWhycGs5ZkloYWhRVnYgJFFoYmpJaEkKICogQHFoUXFJaFR2LWhJRWYgU2tKakloTWhmSWhycGs5ZkloYWhRVnYgJHVqSWhJQVFUCiAqIEBxaFFxSWhUdi1oSUVmIFNrSmpJaE1oZklocnBrOWZJaGFoUVZ2ICRRaGJqSWhJQVFUCiAqCiAqIEBsa1ZrbSBcQUtBdFxuRVRFZUVzSVxHcElodlxycGs5ZkloCiAqKwpGOUVzcyBycGs5ZkloIGtscTlJbEltVHMgcnBrOWZJaG9RbVRoRUZUCnsKCiAgICBwc0kgcnBrOWZzR3BJaGtJcywgMlFodUVoZnNvRTk5cywgR3BJaGtJc05JOUVUa1Ftc2prcXMgewogICAgICAgIHJwazlmc0dwSWhrSXM6OnNROUkgRXMgZUVzSU9ROUk7CiAgICB9CiAgICBwc0kgYUVKa21FVGtRbTsKCiAgICArKioKICAgICAqIEhqSSBlRXNJIFJwSWh2IGVwazlmSWgga21zVEVtRkkuCiAgICAgKgogICAgICogQFVFaCBcQUtBdFxuRVRFZUVzSVxHcElodlxycGs5ZkloCiAgICAgKisKICAgIHFoUVRJRlRJZiAkUnBJaHY7CgogICAgKyoqCiAgICAgKiBIakkgbFFmSTkgZUlrbUogUnBJaGtJZi4KICAgICAqCiAgICAgKiBAVUVoIFxBS0F0XG5FVEVlRXNJXGc5UVJwSW1UXDNRZkk5CiAgICAgKisKICAgIHFoUVRJRlRJZiAkbFFmSTk7CgogICAgKyoqCiAgICAgKiBIakkgaEk5RVRrUW1zamtxcyBUakVUIHNqUXA5ZiBlSSBJRUpJaCA5UUVmSWYuCiAgICAgKgogICAgICogQFVFaCBFaGhFdgogICAgICorCiAgICBxaFFUSUZUSWYgJElFSkloNlFFZiA9IFtdOwoKICAgICsqKgogICAgICogdDk5IFFpIFRqSSBKOVFlRTk5diBoSUprc1RJaElmIGVwazlmSWggbEVGaFFzLgogICAgICoKICAgICAqIEBVRWggRWhoRXYKICAgICAqKwogICAgcWhRVElGVElmIHNURVRrRiAkbEVGaFFzID0gW107CgogICAgKyoqCiAgICAgKiB0OTkgUWkgVGpJIDlRRkU5OXYgaElKa3NUSWhJZiBlcGs5ZkloIGxFRmhRcy4KICAgICAqCiAgICAgKiBAVUVoIEVoaEV2CiAgICAgKisKICAgIHFoUVRJRlRJZiAkOVFGRTkzRUZoUXMgPSBbXTsKCiAgICArKioKICAgICAqIHQgaElxOUVGSWxJbVQgaVFoIFRqSSBUdnFrRkU5IGZJOUlUSSBpcG1GVGtRbS4KICAgICAqCiAgICAgKiBAVUVoIFxvOVFzcGhJCiAgICAgKisKICAgIHFoUVRJRlRJZiAkUW1uSTlJVEk7CgogICAgKyoqCiAgICAgKiBIakkgcWhRcUloVGtJcyBUakVUIHNqUXA5ZiBlSSBoSVRwaG1JZiBpaFFsIFJwSWh2IGVwazlmSWguCiAgICAgKgogICAgICogQFVFaCBzVGhrbUpbXQogICAgICorCiAgICBxaFFUSUZUSWYgJHFoUXFJaFR2YUVzc1RqaHAgPSBbCiAgICAgICAgJ2loUWwnLAogICAgXTsKCiAgICArKioKICAgICAqIEhqSSBsSVRqUWZzIFRqRVQgc2pRcDlmIGVJIGhJVHBobUlmIGloUWwgUnBJaHYgZXBrOWZJaC4KICAgICAqCiAgICAgKiBAVUVoIHNUaGttSltdCiAgICAgKisKICAgIHFoUVRJRlRJZiAkcUVzc1RqaHAgPSBbCiAgICAgICAgJ0VKSmhJSkVUSScsCiAgICAgICAgJ0VVSWhFSkknLAogICAgICAgICdFVUonLAogICAgICAgICdGUXBtVCcsCiAgICAgICAgJ2ZmJywKICAgICAgICAnZmZoRXVzUjknLAogICAgICAgICdmUUlzbVRJVmtzVCcsCiAgICAgICAgJ2ZRSXNtVElWa3NUUWgnLAogICAgICAgICdmcGxxJywKICAgICAgICAnZnBscWhFdXNSOScsCiAgICAgICAgJ0lWa3NUcycsCiAgICAgICAgJ0lWa3NUc1FoJywKICAgICAgICAnSVZxOUVrbScsCiAgICAgICAgJ0pJVGVrbWZrbUpzJywKICAgICAgICAnSklURlFtbUlGVGtRbScsCiAgICAgICAgJ0pJVEpoRWxsRWgnLAogICAgICAgICdrbHE5UWZJJywKICAgICAgICAna21zSWhUJywKICAgICAgICAna21zSWhUSklUa2YnLAogICAgICAgICdrbXNJaFRRaGtKbVFoSScsCiAgICAgICAgJ2ttc0loVHBza21KJywKICAgICAgICAna21zSWhUUWhrSm1RaElwc2ttSicsCiAgICAgICAgJ2xFVicsCiAgICAgICAgJ2xrbScsCiAgICAgICAgJ2hFdScsCiAgICAgICAgJ2hFdVVFOXBJJywKICAgICAgICAnc3BsJywKICAgICAgICAnVFFzUjknLAogICAgICAgICdUUWhFdXNSOScsCiAgICBdOwoKICAgICsqKgogICAgICogdHFxOWtJZiBKOVFlRTkgc0ZRcUlzLgogICAgICoKICAgICAqIEBVRWggRWhoRXYKICAgICAqKwogICAgcWhRVElGVElmICRzRlFxSXMgPSBbXTsKCiAgICArKioKICAgICAqIE5JbFFVSWYgSjlRZUU5IHNGUXFJcy4KICAgICAqCiAgICAgKiBAVUVoIEVoaEV2CiAgICAgKisKICAgIHFoUVRJRlRJZiAkaElsUVVJZk9GUXFJcyA9IFtdOwoKICAgICsqKgogICAgICogb2hJRVRJIEUgbUl1IGc5UVJwSW1UIFJwSWh2IGVwazlmSWgga21zVEVtRkkuCiAgICAgKgogICAgICogQHFFaEVsICBcQUtBdFxuRVRFZUVzSVxHcElodlxycGs5ZkloICAkUnBJaHYKICAgICAqIEBoSVRwaG0gVVFrZgogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gX19GUW1zVGhwRlQoR3BJaHZycGs5ZkloICRScElodikKICAgIHsKICAgICAgICAkVGprcy0+UnBJaHYgPSAkUnBJaHY7CiAgICB9CgogICAgKyoqCiAgICAgKiBvaElFVEkgRW1mIGhJVHBobSBFbSBwbS1zRVVJZiBsUWZJOSBrbXNURW1GSS4KICAgICAqCiAgICAgKiBAcUVoRWwgIEVoaEV2ICAkRVRUaGtlcFRJcwogICAgICogQGhJVHBobSBcQUtBdFxuRVRFZUVzSVxnOVFScEltVFwzUWZJOXxzVEVUa0YKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIGxFOEkoRWhoRXYgJEVUVGhrZXBUSXMgPSBbXSkKICAgIHsKICAgICAgICBoSVRwaG0gJFRqa3MtPm1JdTNRZkk5S21zVEVtRkkoJEVUVGhrZXBUSXMpOwogICAgfQoKICAgICsqKgogICAgICogTklKa3NUSWggRSBtSXUgSjlRZUU5IHNGUXFJLgogICAgICoKICAgICAqIEBxRWhFbCAgc1Roa21KICAka2ZJbVRraWtJaAogICAgICogQHFFaEVsICBcQUtBdFxuRVRFZUVzSVxnOVFScEltVFxPRlFxSXxcbzlRc3BoSSAgJHNGUXFJCiAgICAgKiBAaElUcGhtICRUamtzCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSB1a1RqMDlRZUU5T0ZRcUkoJGtmSW1Ua2lrSWgsICRzRlFxSSkKICAgIHsKICAgICAgICAkVGprcy0+c0ZRcUlzWyRrZkltVGtpa0loXSA9ICRzRlFxSTsKCiAgICAgICAga2kgKGxJVGpRZl9JVmtzVHMoJHNGUXFJLCAnSVZUSW1mJykpIHsKICAgICAgICAgICAgJHNGUXFJLT5JVlRJbWYoJFRqa3MpOwogICAgICAgIH0KCiAgICAgICAgaElUcGhtICRUamtzOwogICAgfQoKICAgICsqKgogICAgICogTklsUVVJIEUgaElKa3NUSWhJZiBKOVFlRTkgc0ZRcUkuCiAgICAgKgogICAgICogQHFFaEVsICBcQUtBdFxuRVRFZUVzSVxnOVFScEltVFxPRlFxSXxzVGhrbUogICRzRlFxSQogICAgICogQGhJVHBobSAkVGprcwogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gdWtUalFwVDA5UWVFOU9GUXFJKCRzRlFxSSkKICAgIHsKICAgICAgICBraSAoISBrc19zVGhrbUooJHNGUXFJKSkgewogICAgICAgICAgICAkc0ZRcUkgPSBKSVRfRjlFc3MoJHNGUXFJKTsKICAgICAgICB9CgogICAgICAgIHBtc0lUKCRUamtzLT5zRlFxSXNbJHNGUXFJXSk7CgogICAgICAgICRUamtzLT5oSWxRVUlmT0ZRcUlzW10gPSAkc0ZRcUk7CgogICAgICAgIGhJVHBobSAkVGprczsKICAgIH0KCiAgICArKioKICAgICAqIE5JbFFVSSBFOTkgUWggcUVzc0lmIGhJSmtzVEloSWYgSjlRZUU5IHNGUXFJcy4KICAgICAqCiAgICAgKiBAcUVoRWwgIEVoaEV2fG1wOTkgICRzRlFxSXMKICAgICAqIEBoSVRwaG0gJFRqa3MKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIHVrVGpRcFQwOVFlRTlPRlFxSXMoRWhoRXYgJHNGUXFJcyA9IG1wOTkpCiAgICB7CiAgICAgICAga2kgKCEga3NfRWhoRXYoJHNGUXFJcykpIHsKICAgICAgICAgICAgJHNGUXFJcyA9IEVoaEV2XzhJdnMoJFRqa3MtPnNGUXFJcyk7CiAgICAgICAgfQoKICAgICAgICBpUWhJRUZqICgkc0ZRcUlzIEVzICRzRlFxSSkgewogICAgICAgICAgICAkVGprcy0+dWtUalFwVDA5UWVFOU9GUXFJKCRzRlFxSSk7CiAgICAgICAgfQoKICAgICAgICBoSVRwaG0gJFRqa3M7CiAgICB9CgogICAgKyoqCiAgICAgKiAwSVQgRW0gRWhoRXYgUWkgSjlRZUU5IHNGUXFJcyBUakVUIHVJaEkgaElsUVVJZiBpaFFsIFRqSSBScElodi4KICAgICAqCiAgICAgKiBAaElUcGhtIEVoaEV2CiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBoSWxRVUlmT0ZRcUlzKCkKICAgIHsKICAgICAgICBoSVRwaG0gJFRqa3MtPmhJbFFVSWZPRlFxSXM7CiAgICB9CgogICAgKyoqCiAgICAgKiB0ZmYgRSB1akloSSBGOUVwc0kgUW0gVGpJIHFoa2xFaHYgOEl2IFRRIFRqSSBScElodi4KICAgICAqCiAgICAgKiBAcUVoRWwgIGxrVklmICAka2YKICAgICAqIEBoSVRwaG0gJFRqa3MKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIHVqSWhJMUl2KCRrZikKICAgIHsKICAgICAgICBraSAoJGtmIGttc1RFbUZJUWkgM1FmSTkpIHsKICAgICAgICAgICAgJGtmID0gJGtmLT5KSVQxSXYoKTsKICAgICAgICB9CgogICAgICAgIGtpIChrc19FaGhFdigka2YpIHx8ICRrZiBrbXNURW1GSVFpIHRoaEV2RWU5SSkgewogICAgICAgICAgICBraSAoa21fRWhoRXYoJFRqa3MtPmxRZkk5LT5KSVQxSXZIdnFJKCksIFsna21UJywgJ2ttVElKSWgnXSkpIHsKICAgICAgICAgICAgICAgICRUamtzLT5ScElodi0+dWpJaElLbVRJSkloS21ORXUoJFRqa3MtPmxRZkk5LT5KSVRHcEU5a2lrSWYxSXZBRWxJKCksICRrZik7CiAgICAgICAgICAgIH0gSTlzSSB7CiAgICAgICAgICAgICAgICAkVGprcy0+UnBJaHYtPnVqSWhJS20oJFRqa3MtPmxRZkk5LT5KSVRHcEU5a2lrSWYxSXZBRWxJKCksICRrZik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGhJVHBobSAkVGprczsKICAgICAgICB9CgogICAgICAgIGtpICgka2YgIT09IG1wOTkgJiYgJFRqa3MtPmxRZkk5LT5KSVQxSXZIdnFJKCkgPT09ICdzVGhrbUonKSB7CiAgICAgICAgICAgICRrZiA9IChzVGhrbUopICRrZjsKICAgICAgICB9CgogICAgICAgIGhJVHBobSAkVGprcy0+dWpJaEkoJFRqa3MtPmxRZkk5LT5KSVRHcEU5a2lrSWYxSXZBRWxJKCksICc9JywgJGtmKTsKICAgIH0KCiAgICArKioKICAgICAqIHRmZiBFIHVqSWhJIEY5RXBzSSBRbSBUakkgcWhrbEVodiA4SXYgVFEgVGpJIFJwSWh2LgogICAgICoKICAgICAqIEBxRWhFbCAgbGtWSWYgICRrZgogICAgICogQGhJVHBobSAkVGprcwogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gdWpJaEkxSXZBUVQoJGtmKQogICAgewogICAgICAgIGtpICgka2Yga21zVEVtRklRaSAzUWZJOSkgewogICAgICAgICAgICAka2YgPSAka2YtPkpJVDFJdigpOwogICAgICAgIH0KCiAgICAgICAga2kgKGtzX0VoaEV2KCRrZikgfHwgJGtmIGttc1RFbUZJUWkgdGhoRXZFZTlJKSB7CiAgICAgICAgICAgIGtpIChrbV9FaGhFdigkVGprcy0+bFFmSTktPkpJVDFJdkh2cUkoKSwgWydrbVQnLCAna21USUpJaCddKSkgewogICAgICAgICAgICAgICAgJFRqa3MtPlJwSWh2LT51akloSUttVElKSWhBUVRLbU5FdSgkVGprcy0+bFFmSTktPkpJVEdwRTlraWtJZjFJdkFFbEkoKSwgJGtmKTsKICAgICAgICAgICAgfSBJOXNJIHsKICAgICAgICAgICAgICAgICRUamtzLT5ScElodi0+dWpJaElBUVRLbSgkVGprcy0+bFFmSTktPkpJVEdwRTlraWtJZjFJdkFFbEkoKSwgJGtmKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaElUcGhtICRUamtzOwogICAgICAgIH0KCiAgICAgICAga2kgKCRrZiAhPT0gbXA5OSAmJiAkVGprcy0+bFFmSTktPkpJVDFJdkh2cUkoKSA9PT0gJ3NUaGttSicpIHsKICAgICAgICAgICAgJGtmID0gKHNUaGttSikgJGtmOwogICAgICAgIH0KCiAgICAgICAgaElUcGhtICRUamtzLT51akloSSgkVGprcy0+bFFmSTktPkpJVEdwRTlraWtJZjFJdkFFbEkoKSwgJyE9JywgJGtmKTsKICAgIH0KCiAgICArKioKICAgICAqIHRmZiBFIGVFc2tGIHVqSWhJIEY5RXBzSSBUUSBUakkgUnBJaHYuCiAgICAgKgogICAgICogQHFFaEVsICBcbzlRc3BoSXxzVGhrbUp8RWhoRXZ8XEs5OXBsa21FVElcb1FtVGhFRlRzXG5FVEVlRXNJXEdwSWh2XGdWcWhJc3NrUW0gICRGUTlwbG0KICAgICAqIEBxRWhFbCAgbGtWSWYgICRRcUloRVRRaAogICAgICogQHFFaEVsICBsa1ZJZiAgJFVFOXBJCiAgICAgKiBAcUVoRWwgIHNUaGttSiAgJGVRUTlJRW0KICAgICAqIEBoSVRwaG0gJFRqa3MKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIHVqSWhJKCRGUTlwbG0sICRRcUloRVRRaCA9IG1wOTksICRVRTlwSSA9IG1wOTksICRlUVE5SUVtID0gJ0VtZicpCiAgICB7CiAgICAgICAga2kgKCRGUTlwbG0ga21zVEVtRklRaSBvOVFzcGhJICYmIGtzX21wOTkoJFFxSWhFVFFoKSkgewogICAgICAgICAgICAkRlE5cGxtKCRScElodiA9ICRUamtzLT5sUWZJOS0+bUl1R3BJaHZia1RqUXBUTkk5RVRrUW1zamtxcygpKTsKCiAgICAgICAgICAgICRUamtzLT5ScElodi0+RWZmQUlzVElmYmpJaElHcElodigkUnBJaHYtPkpJVEdwSWh2KCksICRlUVE5SUVtKTsKICAgICAgICB9IEk5c0kgewogICAgICAgICAgICAkVGprcy0+UnBJaHYtPnVqSWhJKC4uLmlwbUZfSklUX0VoSnMoKSk7CiAgICAgICAgfQoKICAgICAgICBoSVRwaG0gJFRqa3M7CiAgICB9CgogICAgKyoqCiAgICAgKiB0ZmYgRSBlRXNrRiB1akloSSBGOUVwc0kgVFEgVGpJIFJwSWh2LCBFbWYgaElUcGhtIFRqSSBpa2hzVCBoSXNwOVQuCiAgICAgKgogICAgICogQHFFaEVsICBcbzlRc3BoSXxzVGhrbUp8RWhoRXZ8XEs5OXBsa21FVElcb1FtVGhFRlRzXG5FVEVlRXNJXEdwSWh2XGdWcWhJc3NrUW0gICRGUTlwbG0KICAgICAqIEBxRWhFbCAgbGtWSWYgICRRcUloRVRRaAogICAgICogQHFFaEVsICBsa1ZJZiAgJFVFOXBJCiAgICAgKiBAcUVoRWwgIHNUaGttSiAgJGVRUTlJRW0KICAgICAqIEBoSVRwaG0gXEFLQXRcbkVURWVFc0lcZzlRUnBJbVRcM1FmSTl8c1RFVGtGfG1wOTkKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIGlraHNUYmpJaEkoJEZROXBsbSwgJFFxSWhFVFFoID0gbXA5OSwgJFVFOXBJID0gbXA5OSwgJGVRUTlJRW0gPSAnRW1mJykKICAgIHsKICAgICAgICBoSVRwaG0gJFRqa3MtPnVqSWhJKC4uLmlwbUZfSklUX0VoSnMoKSktPmlraHNUKCk7CiAgICB9CgogICAgKyoqCiAgICAgKiB0ZmYgRW0gIlFoIHVqSWhJIiBGOUVwc0kgVFEgVGpJIFJwSWh2LgogICAgICoKICAgICAqIEBxRWhFbCAgXG85UXNwaEl8RWhoRXZ8c1Roa21KfFxLOTlwbGttRVRJXG9RbVRoRUZUc1xuRVRFZUVzSVxHcElodlxnVnFoSXNza1FtICAkRlE5cGxtCiAgICAgKiBAcUVoRWwgIGxrVklmICAkUXFJaEVUUWgKICAgICAqIEBxRWhFbCAgbGtWSWYgICRVRTlwSQogICAgICogQGhJVHBobSAkVGprcwogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gUWhiakloSSgkRlE5cGxtLCAkUXFJaEVUUWggPSBtcDk5LCAkVUU5cEkgPSBtcDk5KQogICAgewogICAgICAgIFskVUU5cEksICRRcUloRVRRaF0gPSAkVGprcy0+UnBJaHYtPnFoSXFFaElCRTlwSXRtZk1xSWhFVFFoKAogICAgICAgICAgICAkVUU5cEksICRRcUloRVRRaCwgaXBtRl9tcGxfRWhKcygpID09PSB4CiAgICAgICAgKTsKCiAgICAgICAgaElUcGhtICRUamtzLT51akloSSgkRlE5cGxtLCAkUXFJaEVUUWgsICRVRTlwSSwgJ1FoJyk7CiAgICB9CgogICAgKyoqCiAgICAgKiB0ZmYgRSBlRXNrRiAidWpJaEkgbVFUIiBGOUVwc0kgVFEgVGpJIFJwSWh2LgogICAgICoKICAgICAqIEBxRWhFbCAgXG85UXNwaEl8c1Roa21KfEVoaEV2fFxLOTlwbGttRVRJXG9RbVRoRUZUc1xuRVRFZUVzSVxHcElodlxnVnFoSXNza1FtICAkRlE5cGxtCiAgICAgKiBAcUVoRWwgIGxrVklmICAkUXFJaEVUUWgKICAgICAqIEBxRWhFbCAgbGtWSWYgICRVRTlwSQogICAgICogQHFFaEVsICBzVGhrbUogICRlUVE5SUVtCiAgICAgKiBAaElUcGhtICRUamtzCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSB1akloSUFRVCgkRlE5cGxtLCAkUXFJaEVUUWggPSBtcDk5LCAkVUU5cEkgPSBtcDk5LCAkZVFROUlFbSA9ICdFbWYnKQogICAgewogICAgICAgIGhJVHBobSAkVGprcy0+dWpJaEkoJEZROXBsbSwgJFFxSWhFVFFoLCAkVUU5cEksICRlUVE5SUVtLicgbVFUJyk7CiAgICB9CgogICAgKyoqCiAgICAgKiB0ZmYgRW0gIlFoIHVqSWhJIG1RVCIgRjlFcHNJIFRRIFRqSSBScElodi4KICAgICAqCiAgICAgKiBAcUVoRWwgIFxvOVFzcGhJfEVoaEV2fHNUaGttSnxcSzk5cGxrbUVUSVxvUW1UaEVGVHNcbkVURWVFc0lcR3BJaHZcZ1ZxaElzc2tRbSAgJEZROXBsbQogICAgICogQHFFaEVsICBsa1ZJZiAgJFFxSWhFVFFoCiAgICAgKiBAcUVoRWwgIGxrVklmICAkVUU5cEkKICAgICAqIEBoSVRwaG0gJFRqa3MKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIFFoYmpJaElBUVQoJEZROXBsbSwgJFFxSWhFVFFoID0gbXA5OSwgJFVFOXBJID0gbXA5OSkKICAgIHsKICAgICAgICBoSVRwaG0gJFRqa3MtPnVqSWhJQVFUKCRGUTlwbG0sICRRcUloRVRRaCwgJFVFOXBJLCAnUWgnKTsKICAgIH0KCiAgICArKioKICAgICAqIHRmZiBFbSAiUWhmSWggZXYiIEY5RXBzSSBpUWggRSBUa2xJc1RFbHEgVFEgVGpJIFJwSWh2LgogICAgICoKICAgICAqIEBxRWhFbCAgc1Roa21KfFxLOTlwbGttRVRJXG9RbVRoRUZUc1xuRVRFZUVzSVxHcElodlxnVnFoSXNza1FtICAkRlE5cGxtCiAgICAgKiBAaElUcGhtICRUamtzCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSA5RVRJc1QoJEZROXBsbSA9IG1wOTkpCiAgICB7CiAgICAgICAga2kgKGtzX21wOTkoJEZROXBsbSkpIHsKICAgICAgICAgICAgJEZROXBsbSA9ICRUamtzLT5sUWZJOS0+SklUb2hJRVRJZnRUb1E5cGxtKCkgPz8gJ0ZoSUVUSWZfRVQnOwogICAgICAgIH0KCiAgICAgICAgJFRqa3MtPlJwSWh2LT45RVRJc1QoJEZROXBsbSk7CgogICAgICAgIGhJVHBobSAkVGprczsKICAgIH0KCiAgICArKioKICAgICAqIHRmZiBFbSAiUWhmSWggZXYiIEY5RXBzSSBpUWggRSBUa2xJc1RFbHEgVFEgVGpJIFJwSWh2LgogICAgICoKICAgICAqIEBxRWhFbCAgc1Roa21KfFxLOTlwbGttRVRJXG9RbVRoRUZUc1xuRVRFZUVzSVxHcElodlxnVnFoSXNza1FtICAkRlE5cGxtCiAgICAgKiBAaElUcGhtICRUamtzCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBROWZJc1QoJEZROXBsbSA9IG1wOTkpCiAgICB7CiAgICAgICAga2kgKGtzX21wOTkoJEZROXBsbSkpIHsKICAgICAgICAgICAgJEZROXBsbSA9ICRUamtzLT5sUWZJOS0+SklUb2hJRVRJZnRUb1E5cGxtKCkgPz8gJ0ZoSUVUSWZfRVQnOwogICAgICAgIH0KCiAgICAgICAgJFRqa3MtPlJwSWh2LT5ROWZJc1QoJEZROXBsbSk7CgogICAgICAgIGhJVHBobSAkVGprczsKICAgIH0KCiAgICArKioKICAgICAqIG9oSUVUSSBFIEZROTlJRlRrUW0gUWkgbFFmSTlzIGloUWwgcTlFa20gRWhoRXZzLgogICAgICoKICAgICAqIEBxRWhFbCAgRWhoRXYgICRrVElscwogICAgICogQGhJVHBobSBcQUtBdFxuRVRFZUVzSVxnOVFScEltVFxvUTk5SUZUa1FtCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBqdmZoRVRJKEVoaEV2ICRrVElscykKICAgIHsKICAgICAgICAka21zVEVtRkkgPSAkVGprcy0+bUl1M1FmSTlLbXNURW1GSSgpOwoKICAgICAgICBoSVRwaG0gJGttc1RFbUZJLT5tSXVvUTk5SUZUa1FtKEVoaEV2X2xFcShpcG1GVGtRbSAoJGtUSWwpIHBzSSAoJGtUSWxzLCAka21zVEVtRkkpIHsKICAgICAgICAgICAgJGxRZkk5ID0gJGttc1RFbUZJLT5tSXUyaFFscnBrOWZJaCgka1RJbCk7CgogICAgICAgICAgICBraSAoRlFwbVQoJGtUSWxzKSA+IFgpIHsKICAgICAgICAgICAgICAgICRsUWZJOS0+cWhJVUltVHM2RVd2NlFFZmttSiA9IDNRZkk5OjpxaElVSW1UczZFV3Y2UUVma21KKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGhJVHBobSAkbFFmSTk7CiAgICAgICAgfSwgJGtUSWxzKSk7CiAgICB9CgogICAgKyoqCiAgICAgKiBvaElFVEkgRSBGUTk5SUZUa1FtIFFpIGxRZkk5cyBpaFFsIEUgaEV1IFJwSWh2LgogICAgICoKICAgICAqIEBxRWhFbCAgc1Roa21KICAkUnBJaHYKICAgICAqIEBxRWhFbCAgRWhoRXYgICRla21ma21KcwogICAgICogQGhJVHBobSBcQUtBdFxuRVRFZUVzSVxnOVFScEltVFxvUTk5SUZUa1FtCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBpaFFsR3BJaHYoJFJwSWh2LCAkZWttZmttSnMgPSBbXSkKICAgIHsKICAgICAgICBoSVRwaG0gJFRqa3MtPmp2ZmhFVEkoCiAgICAgICAgICAgICRUamtzLT5ScElodi0+SklUb1FtbUlGVGtRbSgpLT5zSTlJRlQoJFJwSWh2LCAkZWttZmttSnMpCiAgICAgICAgKTsKICAgIH0KCiAgICArKioKICAgICAqIDJrbWYgRSBsUWZJOSBldiBrVHMgcWhrbEVodiA4SXYuCiAgICAgKgogICAgICogQHFFaEVsICBsa1ZJZiAgJGtmCiAgICAgKiBAcUVoRWwgIEVoaEV2fHNUaGttSiAgJEZROXBsbXMKICAgICAqIEBoSVRwaG0gXEFLQXRcbkVURWVFc0lcZzlRUnBJbVRcM1FmSTl8XEFLQXRcbkVURWVFc0lcZzlRUnBJbVRcb1E5OUlGVGtRbXxzVEVUa0ZbXXxzVEVUa0Z8bXA5OQogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gaWttZigka2YsICRGUTlwbG1zID0gWycqJ10pCiAgICB7CiAgICAgICAga2kgKGtzX0VoaEV2KCRrZikgfHwgJGtmIGttc1RFbUZJUWkgdGhoRXZFZTlJKSB7CiAgICAgICAgICAgIGhJVHBobSAkVGprcy0+aWttZjNFbXYoJGtmLCAkRlE5cGxtcyk7CiAgICAgICAgfQoKICAgICAgICBoSVRwaG0gJFRqa3MtPnVqSWhJMUl2KCRrZiktPmlraHNUKCRGUTlwbG1zKTsKICAgIH0KCiAgICArKioKICAgICAqIDJrbWYgbHA5VGtxOUkgbFFmSTlzIGV2IFRqSWtoIHFoa2xFaHYgOEl2cy4KICAgICAqCiAgICAgKiBAcUVoRWwgIFxLOTlwbGttRVRJXG9RbVRoRUZUc1xPcHFxUWhUXHRoaEV2RWU5SXxFaGhFdiAgJGtmcwogICAgICogQHFFaEVsICBFaGhFdnxzVGhrbUogICRGUTlwbG1zCiAgICAgKiBAaElUcGhtIFxBS0F0XG5FVEVlRXNJXGc5UVJwSW1UXG9ROTlJRlRrUW0KICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIGlrbWYzRW12KCRrZnMsICRGUTlwbG1zID0gWycqJ10pCiAgICB7CiAgICAgICAgJGtmcyA9ICRrZnMga21zVEVtRklRaSB0aGhFdkVlOUkgPyAka2ZzLT5UUXRoaEV2KCkgOiAka2ZzOwoKICAgICAgICBraSAoSWxxVHYoJGtmcykpIHsKICAgICAgICAgICAgaElUcGhtICRUamtzLT5sUWZJOS0+bUl1b1E5OUlGVGtRbSgpOwogICAgICAgIH0KCiAgICAgICAgaElUcGhtICRUamtzLT51akloSTFJdigka2ZzKS0+SklUKCRGUTlwbG1zKTsKICAgIH0KCiAgICArKioKICAgICAqIDJrbWYgRSBsUWZJOSBldiBrVHMgcWhrbEVodiA4SXYgUWggVGpoUXUgRW0gSVZGSXFUa1FtLgogICAgICoKICAgICAqIEBxRWhFbCAgbGtWSWYgICRrZgogICAgICogQHFFaEVsICBFaGhFdnxzVGhrbUogICRGUTlwbG1zCiAgICAgKiBAaElUcGhtIFxBS0F0XG5FVEVlRXNJXGc5UVJwSW1UXDNRZkk5fFxBS0F0XG5FVEVlRXNJXGc5UVJwSW1UXG9ROTlJRlRrUW18c1RFVGtGfHNURVRrRltdCiAgICAgKgogICAgICogQFRqaFF1cyBcQUtBdFxuRVRFZUVzSVxnOVFScEltVFwzUWZJOUFRVDJRcG1mZ1ZGSXFUa1FtPFxBS0F0XG5FVEVlRXNJXGc5UVJwSW1UXDNRZkk5PgogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gaWttZk1oMkVrOSgka2YsICRGUTlwbG1zID0gWycqJ10pCiAgICB7CiAgICAgICAgJGhJc3A5VCA9ICRUamtzLT5pa21mKCRrZiwgJEZROXBsbXMpOwoKICAgICAgICAka2YgPSAka2Yga21zVEVtRklRaSB0aGhFdkVlOUkgPyAka2YtPlRRdGhoRXYoKSA6ICRrZjsKCiAgICAgICAga2kgKGtzX0VoaEV2KCRrZikpIHsKICAgICAgICAgICAga2kgKEZRcG1UKCRoSXNwOVQpICE9PSBGUXBtVChFaGhFdl9wbWtScEkoJGtmKSkpIHsKICAgICAgICAgICAgICAgIFRqaFF1IChtSXUgM1FmSTlBUVQyUXBtZmdWRklxVGtRbSktPnNJVDNRZkk5KAogICAgICAgICAgICAgICAgICAgIEpJVF9GOUVzcygkVGprcy0+bFFmSTkpLCBFaGhFdl9ma2lpKCRrZiwgJGhJc3A5VC0+bFFmSTkxSXZzKCkpCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CgogICAgICAgICAgICBoSVRwaG0gJGhJc3A5VDsKICAgICAgICB9CgogICAgICAgIGtpIChrc19tcDk5KCRoSXNwOVQpKSB7CiAgICAgICAgICAgIFRqaFF1IChtSXUgM1FmSTlBUVQyUXBtZmdWRklxVGtRbSktPnNJVDNRZkk5KAogICAgICAgICAgICAgICAgSklUX0Y5RXNzKCRUamtzLT5sUWZJOSksICRrZgogICAgICAgICAgICApOwogICAgICAgIH0KCiAgICAgICAgaElUcGhtICRoSXNwOVQ7CiAgICB9CgogICAgKyoqCiAgICAgKiAya21mIEUgbFFmSTkgZXYga1RzIHFoa2xFaHYgOEl2IFFoIGhJVHBobSBpaElzaiBsUWZJOSBrbXNURW1GSS4KICAgICAqCiAgICAgKiBAcUVoRWwgIGxrVklmICAka2YKICAgICAqIEBxRWhFbCAgRWhoRXZ8c1Roa21KICAkRlE5cGxtcwogICAgICogQGhJVHBobSBcQUtBdFxuRVRFZUVzSVxnOVFScEltVFwzUWZJOXxzVEVUa0YKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIGlrbWZNaEFJdSgka2YsICRGUTlwbG1zID0gWycqJ10pCiAgICB7CiAgICAgICAga2kgKCEga3NfbXA5OSgkbFFmSTkgPSAkVGprcy0+aWttZigka2YsICRGUTlwbG1zKSkpIHsKICAgICAgICAgICAgaElUcGhtICRsUWZJOTsKICAgICAgICB9CgogICAgICAgIGhJVHBobSAkVGprcy0+bUl1M1FmSTlLbXNURW1GSSgpOwogICAgfQoKICAgICsqKgogICAgICogMmttZiBFIGxRZkk5IGV2IGtUcyBxaGtsRWh2IDhJdiBRaCBGRTk5IEUgRkU5OWVFRjguCiAgICAgKgogICAgICogQHFFaEVsICBsa1ZJZiAgJGtmCiAgICAgKiBAcUVoRWwgIFxvOVFzcGhJfEVoaEV2fHNUaGttSiAgJEZROXBsbXMKICAgICAqIEBxRWhFbCAgXG85UXNwaEl8bXA5OSAgJEZFOTllRUY4CiAgICAgKiBAaElUcGhtIFxBS0F0XG5FVEVlRXNJXGc5UVJwSW1UXDNRZkk5fFxBS0F0XG5FVEVlRXNJXGc5UVJwSW1UXG9ROTlJRlRrUW18c1RFVGtGW118c1RFVGtGfGxrVklmCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBpa21mTWgoJGtmLCAkRlE5cGxtcyA9IFsnKiddLCBvOVFzcGhJICRGRTk5ZUVGOCA9IG1wOTkpCiAgICB7CiAgICAgICAga2kgKCRGUTlwbG1zIGttc1RFbUZJUWkgbzlRc3BoSSkgewogICAgICAgICAgICAkRkU5OWVFRjggPSAkRlE5cGxtczsKCiAgICAgICAgICAgICRGUTlwbG1zID0gWycqJ107CiAgICAgICAgfQoKICAgICAgICBraSAoISBrc19tcDk5KCRsUWZJOSA9ICRUamtzLT5pa21mKCRrZiwgJEZROXBsbXMpKSkgewogICAgICAgICAgICBoSVRwaG0gJGxRZkk5OwogICAgICAgIH0KCiAgICAgICAgaElUcGhtICRGRTk5ZUVGOCgpOwogICAgfQoKICAgICsqKgogICAgICogMElUIFRqSSBpa2hzVCBoSUZRaGYgbEVURmprbUogVGpJIEVUVGhrZXBUSXMgUWgga21zVEVtVGtFVEkga1QuCiAgICAgKgogICAgICogQHFFaEVsICBFaGhFdiAgJEVUVGhrZXBUSXMKICAgICAqIEBxRWhFbCAgRWhoRXYgICRVRTlwSXMKICAgICAqIEBoSVRwaG0gXEFLQXRcbkVURWVFc0lcZzlRUnBJbVRcM1FmSTl8c1RFVGtGCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBpa2hzVE1oQUl1KEVoaEV2ICRFVFRoa2VwVElzID0gW10sIEVoaEV2ICRVRTlwSXMgPSBbXSkKICAgIHsKICAgICAgICBraSAoISBrc19tcDk5KCRrbXNURW1GSSA9ICRUamtzLT51akloSSgkRVRUaGtlcFRJcyktPmlraHNUKCkpKSB7CiAgICAgICAgICAgIGhJVHBobSAka21zVEVtRkk7CiAgICAgICAgfQoKICAgICAgICBoSVRwaG0gJFRqa3MtPm1JdTNRZkk5S21zVEVtRkkoRWhoRXZfbEloSkkoJEVUVGhrZXBUSXMsICRVRTlwSXMpKTsKICAgIH0KCiAgICArKioKICAgICAqIDBJVCBUakkgaWtoc1QgaElGUWhmIGxFVEZqa21KIFRqSSBFVFRoa2VwVElzLiBLaSBUakkgaElGUWhmIGtzIG1RVCBpUXBtZiwgRmhJRVRJIGtULgogICAgICoKICAgICAqIEBxRWhFbCAgRWhoRXYgICRFVFRoa2VwVElzCiAgICAgKiBAcUVoRWwgIEVoaEV2ICAkVUU5cElzCiAgICAgKiBAaElUcGhtIFxBS0F0XG5FVEVlRXNJXGc5UVJwSW1UXDNRZkk5fHNURVRrRgogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gaWtoc1RNaG9oSUVUSShFaGhFdiAkRVRUaGtlcFRJcyA9IFtdLCBFaGhFdiAkVUU5cElzID0gW10pCiAgICB7CiAgICAgICAga2kgKCEga3NfbXA5OSgka21zVEVtRkkgPSAoRjlRbUkgJFRqa3MpLT51akloSSgkRVRUaGtlcFRJcyktPmlraHNUKCkpKSB7CiAgICAgICAgICAgIGhJVHBobSAka21zVEVtRkk7CiAgICAgICAgfQoKICAgICAgICBoSVRwaG0gJFRqa3MtPkZoSUVUSU1oMmtoc1QoJEVUVGhrZXBUSXMsICRVRTlwSXMpOwogICAgfQoKICAgICsqKgogICAgICogdFRUSWxxVCBUUSBGaElFVEkgVGpJIGhJRlFoZi4gS2kgRSBwbWtScEkgRlFtc1RoRWttVCBVa1E5RVRrUW0gUUZGcGhzLCBFVFRJbHFUIFRRIGlrbWYgVGpJIGxFVEZqa21KIGhJRlFoZi4KICAgICAqCiAgICAgKiBAcUVoRWwgIEVoaEV2ICAkRVRUaGtlcFRJcwogICAgICogQHFFaEVsICBFaGhFdiAgJFVFOXBJcwogICAgICogQGhJVHBobSBcQUtBdFxuRVRFZUVzSVxnOVFScEltVFwzUWZJOXxzVEVUa0YKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIEZoSUVUSU1oMmtoc1QoRWhoRXYgJEVUVGhrZXBUSXMgPSBbXSwgRWhoRXYgJFVFOXBJcyA9IFtdKQogICAgewogICAgICAgIFRodiB7CiAgICAgICAgICAgIGhJVHBobSAkVGprcy0+dWtUak9FVUlxUWttVEtpQUlJZklmKGltICgpID0+ICRUamtzLT5GaElFVEkoRWhoRXZfbEloSkkoJEVUVGhrZXBUSXMsICRVRTlwSXMpKSk7CiAgICAgICAgfSBGRVRGaiAoUG1rUnBJb1Ftc1RoRWttVEJrUTlFVGtRbWdWRklxVGtRbSAkSSkgewogICAgICAgICAgICBoSVRwaG0gJFRqa3MtPnBzSWJoa1RJYWZRKCktPnVqSWhJKCRFVFRoa2VwVElzKS0+aWtoc1QoKSA/PyBUamhRdSAkSTsKICAgICAgICB9CiAgICB9CgogICAgKyoqCiAgICAgKiBvaElFVEkgUWggcHFmRVRJIEUgaElGUWhmIGxFVEZqa21KIFRqSSBFVFRoa2VwVElzLCBFbWYgaWs5OSBrVCB1a1RqIFVFOXBJcy4KICAgICAqCiAgICAgKiBAcUVoRWwgIEVoaEV2ICAkRVRUaGtlcFRJcwogICAgICogQHFFaEVsICBFaGhFdiAgJFVFOXBJcwogICAgICogQGhJVHBobSBcQUtBdFxuRVRFZUVzSVxnOVFScEltVFwzUWZJOXxzVEVUa0YKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIHBxZkVUSU1ob2hJRVRJKEVoaEV2ICRFVFRoa2VwVElzLCBFaGhFdiAkVUU5cElzID0gW10pCiAgICB7CiAgICAgICAgaElUcGhtIFRFcSgkVGprcy0+aWtoc1RNaG9oSUVUSSgkRVRUaGtlcFRJcywgJFVFOXBJcyksIGlwbUZUa1FtICgka21zVEVtRkkpIHBzSSAoJFVFOXBJcykgewogICAgICAgICAgICBraSAoISAka21zVEVtRkktPnVFc05JRkltVDl2b2hJRVRJZikgewogICAgICAgICAgICAgICAgJGttc1RFbUZJLT5pazk5KCRVRTlwSXMpLT5zRVVJKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0KCiAgICArKioKICAgICAqIGdWSUZwVEkgVGpJIFJwSWh2IEVtZiBKSVQgVGpJIGlraHNUIGhJc3A5VCBRaCBUamhRdSBFbSBJVkZJcVRrUW0uCiAgICAgKgogICAgICogQHFFaEVsICBFaGhFdnxzVGhrbUogICRGUTlwbG1zCiAgICAgKiBAaElUcGhtIFxBS0F0XG5FVEVlRXNJXGc5UVJwSW1UXDNRZkk5fHNURVRrRgogICAgICoKICAgICAqIEBUamhRdXMgXEFLQXRcbkVURWVFc0lcZzlRUnBJbVRcM1FmSTlBUVQyUXBtZmdWRklxVGtRbTxcQUtBdFxuRVRFZUVzSVxnOVFScEltVFwzUWZJOT4KICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIGlraHNUTWgyRWs5KCRGUTlwbG1zID0gWycqJ10pCiAgICB7CiAgICAgICAga2kgKCEga3NfbXA5OSgkbFFmSTkgPSAkVGprcy0+aWtoc1QoJEZROXBsbXMpKSkgewogICAgICAgICAgICBoSVRwaG0gJGxRZkk5OwogICAgICAgIH0KCiAgICAgICAgVGpoUXUgKG1JdSAzUWZJOUFRVDJRcG1mZ1ZGSXFUa1FtKS0+c0lUM1FmSTkoSklUX0Y5RXNzKCRUamtzLT5sUWZJOSkpOwogICAgfQoKICAgICsqKgogICAgICogZ1ZJRnBUSSBUakkgUnBJaHYgRW1mIEpJVCBUakkgaWtoc1QgaElzcDlUIFFoIEZFOTkgRSBGRTk5ZUVGOC4KICAgICAqCiAgICAgKiBAcUVoRWwgIFxvOVFzcGhJfEVoaEV2fHNUaGttSiAgJEZROXBsbXMKICAgICAqIEBxRWhFbCAgXG85UXNwaEl8bXA5OSAgJEZFOTllRUY4CiAgICAgKiBAaElUcGhtIFxBS0F0XG5FVEVlRXNJXGc5UVJwSW1UXDNRZkk5fHNURVRrRnxsa1ZJZgogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gaWtoc1RNaCgkRlE5cGxtcyA9IFsnKiddLCBvOVFzcGhJICRGRTk5ZUVGOCA9IG1wOTkpCiAgICB7CiAgICAgICAga2kgKCRGUTlwbG1zIGttc1RFbUZJUWkgbzlRc3BoSSkgewogICAgICAgICAgICAkRkU5OWVFRjggPSAkRlE5cGxtczsKCiAgICAgICAgICAgICRGUTlwbG1zID0gWycqJ107CiAgICAgICAgfQoKICAgICAgICBraSAoISBrc19tcDk5KCRsUWZJOSA9ICRUamtzLT5pa2hzVCgkRlE5cGxtcykpKSB7CiAgICAgICAgICAgIGhJVHBobSAkbFFmSTk7CiAgICAgICAgfQoKICAgICAgICBoSVRwaG0gJEZFOTllRUY4KCk7CiAgICB9CgogICAgKyoqCiAgICAgKiBnVklGcFRJIFRqSSBScElodiBFbWYgSklUIFRqSSBpa2hzVCBoSXNwOVQga2kga1QncyBUakkgc1E5SSBsRVRGamttSiBoSUZRaGYuCiAgICAgKgogICAgICogQHFFaEVsICBFaGhFdnxzVGhrbUogICRGUTlwbG1zCiAgICAgKiBAaElUcGhtIFxBS0F0XG5FVEVlRXNJXGc5UVJwSW1UXDNRZkk5CiAgICAgKgogICAgICogQFRqaFF1cyBcQUtBdFxuRVRFZUVzSVxnOVFScEltVFwzUWZJOUFRVDJRcG1mZ1ZGSXFUa1FtPFxBS0F0XG5FVEVlRXNJXGc5UVJwSW1UXDNRZkk5PgogICAgICogQFRqaFF1cyBcQUtBdFxuRVRFZUVzSVwzcDlUa3E5SU5JRlFoZnMyUXBtZmdWRklxVGtRbQogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gc1E5SSgkRlE5cGxtcyA9IFsnKiddKQogICAgewogICAgICAgIFRodiB7CiAgICAgICAgICAgIGhJVHBobSAkVGprcy0+ZUVzSU9ROUkoJEZROXBsbXMpOwogICAgICAgIH0gRkVURmogKE5JRlFoZnNBUVQyUXBtZmdWRklxVGtRbSkgewogICAgICAgICAgICBUamhRdSAobUl1IDNRZkk5QVFUMlFwbWZnVkZJcVRrUW0pLT5zSVQzUWZJOShKSVRfRjlFc3MoJFRqa3MtPmxRZkk5KSk7CiAgICAgICAgfQogICAgfQoKICAgICsqKgogICAgICogMElUIEUgc2ttSjlJIEZROXBsbSdzIFVFOXBJIGloUWwgVGpJIGlraHNUIGhJc3A5VCBRaSBFIFJwSWh2LgogICAgICoKICAgICAqIEBxRWhFbCAgc1Roa21KfFxLOTlwbGttRVRJXG9RbVRoRUZUc1xuRVRFZUVzSVxHcElodlxnVnFoSXNza1FtICAkRlE5cGxtCiAgICAgKiBAaElUcGhtIGxrVklmCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBVRTlwSSgkRlE5cGxtKQogICAgewogICAgICAgIGtpICgkaElzcDlUID0gJFRqa3MtPmlraHNUKFskRlE5cGxtXSkpIHsKICAgICAgICAgICAgJEZROXBsbSA9ICRGUTlwbG0ga21zVEVtRklRaSBnVnFoSXNza1FtID8gJEZROXBsbS0+SklUQkU5cEkoJFRqa3MtPkpJVDBoRWxsRWgoKSkgOiAkRlE5cGxtOwoKICAgICAgICAgICAgaElUcGhtICRoSXNwOVQtPntPVGg6OkVpVEloNkVzVCgkRlE5cGxtLCAnLicpfTsKICAgICAgICB9CiAgICB9CgogICAgKyoqCiAgICAgKiAwSVQgRSBza21KOUkgRlE5cGxtJ3MgVUU5cEkgaWhRbCBUakkgaWtoc1QgaElzcDlUIFFpIEUgUnBJaHYga2kga1QncyBUakkgc1E5SSBsRVRGamttSiBoSUZRaGYuCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUp8XEs5OXBsa21FVElcb1FtVGhFRlRzXG5FVEVlRXNJXEdwSWh2XGdWcWhJc3NrUW0gICRGUTlwbG0KICAgICAqIEBoSVRwaG0gbGtWSWYKICAgICAqCiAgICAgKiBAVGpoUXVzIFxBS0F0XG5FVEVlRXNJXGc5UVJwSW1UXDNRZkk5QVFUMlFwbWZnVkZJcVRrUW08XEFLQXRcbkVURWVFc0lcZzlRUnBJbVRcM1FmSTk+CiAgICAgKiBAVGpoUXVzIFxBS0F0XG5FVEVlRXNJXDNwOVRrcTlJTklGUWhmczJRcG1mZ1ZGSXFUa1FtCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBzUTlJQkU5cEkoJEZROXBsbSkKICAgIHsKICAgICAgICAkRlE5cGxtID0gJEZROXBsbSBrbXNURW1GSVFpIGdWcWhJc3NrUW0gPyAkRlE5cGxtLT5KSVRCRTlwSSgkVGprcy0+SklUMGhFbGxFaCgpKSA6ICRGUTlwbG07CgogICAgICAgIGhJVHBobSAkVGprcy0+c1E5SShbJEZROXBsbV0pLT57T1RoOjpFaVRJaDZFc1QoJEZROXBsbSwgJy4nKX07CiAgICB9CgogICAgKyoqCiAgICAgKiAwSVQgRSBza21KOUkgRlE5cGxtJ3MgVUU5cEkgaWhRbCBUakkgaWtoc1QgaElzcDlUIFFpIFRqSSBScElodiBRaCBUamhRdSBFbSBJVkZJcVRrUW0uCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUp8XEs5OXBsa21FVElcb1FtVGhFRlRzXG5FVEVlRXNJXEdwSWh2XGdWcWhJc3NrUW0gICRGUTlwbG0KICAgICAqIEBoSVRwaG0gbGtWSWYKICAgICAqCiAgICAgKiBAVGpoUXVzIFxBS0F0XG5FVEVlRXNJXGc5UVJwSW1UXDNRZkk5QVFUMlFwbWZnVkZJcVRrUW08XEFLQXRcbkVURWVFc0lcZzlRUnBJbVRcM1FmSTk+CiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBVRTlwSU1oMkVrOSgkRlE5cGxtKQogICAgewogICAgICAgICRGUTlwbG0gPSAkRlE5cGxtIGttc1RFbUZJUWkgZ1ZxaElzc2tRbSA/ICRGUTlwbG0tPkpJVEJFOXBJKCRUamtzLT5KSVQwaEVsbEVoKCkpIDogJEZROXBsbTsKCiAgICAgICAgaElUcGhtICRUamtzLT5pa2hzVE1oMkVrOShbJEZROXBsbV0pLT57T1RoOjpFaVRJaDZFc1QoJEZROXBsbSwgJy4nKX07CiAgICB9CgogICAgKyoqCiAgICAgKiBnVklGcFRJIFRqSSBScElodiBFcyBFICJzSTlJRlQiIHNURVRJbEltVC4KICAgICAqCiAgICAgKiBAcUVoRWwgIEVoaEV2fHNUaGttSiAgJEZROXBsbXMKICAgICAqIEBoSVRwaG0gXEFLQXRcbkVURWVFc0lcZzlRUnBJbVRcb1E5OUlGVGtRbXxzVEVUa0ZbXQogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gSklUKCRGUTlwbG1zID0gWycqJ10pCiAgICB7CiAgICAgICAgJGVwazlmSWggPSAkVGprcy0+RXFxOXZPRlFxSXMoKTsKCiAgICAgICAgKysgS2kgdUkgRUZUcEU5OXYgaVFwbWYgbFFmSTlzIHVJIHVrOTkgRTlzUSBJRUpJaCA5UUVmIEVtdiBoSTlFVGtRbXNqa3FzIFRqRVQKICAgICAgICArKyBqRVVJIGVJSW0gc3FJRmtpa0lmIEVzIG1JSWZrbUogVFEgZUkgSUVKSWggOVFFZklmLCB1amtGaiB1azk5IHNROVVJIFRqSQogICAgICAgICsrIG0vWCBScElodiBrc3NwSSBpUWggVGpJIGZJVUk5UXFJaHMgVFEgRVVRa2YgaHBtbWttSiBFIDlRVCBRaSBScEloa0lzLgogICAgICAgIGtpIChGUXBtVCgkbFFmSTlzID0gJGVwazlmSWgtPkpJVDNRZkk5cygkRlE5cGxtcykpID4gdykgewogICAgICAgICAgICAkbFFmSTlzID0gJGVwazlmSWgtPklFSkloNlFFZk5JOUVUa1FtcygkbFFmSTlzKTsKICAgICAgICB9CgogICAgICAgIGhJVHBobSAkZXBrOWZJaC0+SklUM1FmSTkoKS0+bUl1b1E5OUlGVGtRbSgkbFFmSTlzKTsKICAgIH0KCiAgICArKioKICAgICAqIDBJVCBUakkganZmaEVUSWYgbFFmSTlzIHVrVGpRcFQgSUVKSWggOVFFZmttSi4KICAgICAqCiAgICAgKiBAcUVoRWwgIEVoaEV2fHNUaGttSiAgJEZROXBsbXMKICAgICAqIEBoSVRwaG0gXEFLQXRcbkVURWVFc0lcZzlRUnBJbVRcM1FmSTlbXXxzVEVUa0ZbXQogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gSklUM1FmSTlzKCRGUTlwbG1zID0gWycqJ10pCiAgICB7CiAgICAgICAgaElUcGhtICRUamtzLT5sUWZJOS0+anZmaEVUSSgKICAgICAgICAgICAgJFRqa3MtPlJwSWh2LT5KSVQoJEZROXBsbXMpLT5FOTkoKQogICAgICAgICktPkU5OSgpOwogICAgfQoKICAgICsqKgogICAgICogZ0VKSWggOVFFZiBUakkgaEk5RVRrUW1zamtxcyBpUWggVGpJIGxRZkk5cy4KICAgICAqCiAgICAgKiBAcUVoRWwgIEVoaEV2ICAkbFFmSTlzCiAgICAgKiBAaElUcGhtIEVoaEV2CiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBJRUpJaDZRRWZOSTlFVGtRbXMoRWhoRXYgJGxRZkk5cykKICAgIHsKICAgICAgICBpUWhJRUZqICgkVGprcy0+SUVKSWg2UUVmIEVzICRtRWxJID0+ICRGUW1zVGhFa21UcykgewogICAgICAgICAgICArKyAyUWggbUlzVElmIElFSkloIDlRRWZzIHVJJzk5IHM4a3EgOVFFZmttSiBUaklsIGpJaEkgRW1mIFRqSXYgdWs5OSBlSSBzSVQgRXMgRW0KICAgICAgICAgICAgKysgSUVKSWggOVFFZiBRbSBUakkgUnBJaHYgVFEgaElUaGtJVUkgVGpJIGhJOUVUa1FtIHNRIFRqRVQgVGpJdiB1azk5IGVJIElFSkloCiAgICAgICAgICAgICsrIDlRRWZJZiBRbSBUakVUIFJwSWh2LCBlSUZFcHNJIFRqRVQga3MgdWpJaEkgVGpJdiBKSVQganZmaEVUSWYgRXMgbFFmSTlzLgogICAgICAgICAgICBraSAoISBzVGhfRlFtVEVrbXMoJG1FbEksICcuJykpIHsKICAgICAgICAgICAgICAgICRsUWZJOXMgPSAkVGprcy0+SUVKSWg2UUVmTkk5RVRrUW0oJGxRZkk5cywgJG1FbEksICRGUW1zVGhFa21Ucyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGhJVHBobSAkbFFmSTlzOwogICAgfQoKICAgICsqKgogICAgICogZ0VKSWg5diA5UUVmIFRqSSBoSTlFVGtRbXNqa3EgUW0gRSBzSVQgUWkgbFFmSTlzLgogICAgICoKICAgICAqIEBxRWhFbCAgRWhoRXYgICRsUWZJOXMKICAgICAqIEBxRWhFbCAgc1Roa21KICAkbUVsSQogICAgICogQHFFaEVsICBcbzlRc3BoSSAgJEZRbXNUaEVrbVRzCiAgICAgKiBAaElUcGhtIEVoaEV2CiAgICAgKisKICAgIHFoUVRJRlRJZiBpcG1GVGtRbSBJRUpJaDZRRWZOSTlFVGtRbShFaGhFdiAkbFFmSTlzLCAkbUVsSSwgbzlRc3BoSSAkRlFtc1RoRWttVHMpCiAgICB7CiAgICAgICAgKysgMmtoc1QgdUkgdWs5OSAiZUVGOCBwcSIgVGpJIElWa3NUa21KIHVqSWhJIEZRbWZrVGtRbXMgUW0gVGpJIFJwSWh2IHNRIHVJIEZFbQogICAgICAgICsrIEVmZiBRcGggSUVKSWggRlFtc1RoRWttVHMuIEhqSW0gdUkgdWs5OSBsSWhKSSBUakkgdWpJaElzIFRqRVQgdUloSSBRbSBUakkKICAgICAgICArKyBScElodiBlRUY4IFRRIGtUIGttIFFoZkloIFRqRVQgRW12IHVqSWhJIEZRbWZrVGtRbXMgbGtKalQgZUkgc3FJRmtpa0lmLgogICAgICAgICRoSTlFVGtRbSA9ICRUamtzLT5KSVROSTlFVGtRbSgkbUVsSSk7CgogICAgICAgICRoSTlFVGtRbS0+RWZmZ0VKSWhvUW1zVGhFa21UcygkbFFmSTlzKTsKCiAgICAgICAgJEZRbXNUaEVrbVRzKCRoSTlFVGtRbSk7CgogICAgICAgICsrIE1tRkkgdUkgakVVSSBUakkgaElzcDlUcywgdUkgTHBzVCBsRVRGaiBUalFzSSBlRUY4IHBxIFRRIFRqSWtoIHFFaEltVCBsUWZJOXMKICAgICAgICArKyBwc2ttSiBUakkgaEk5RVRrUW1zamtxIGttc1RFbUZJLiBIakltIHVJIExwc1QgaElUcGhtIFRqSSBpa21rc2pJZiBFaGhFdnMKICAgICAgICArKyBRaSBsUWZJOXMgdWprRmogakVVSSBlSUltIElFSkloOXYganZmaEVUSWYgRW1mIEVoSSBoSUVma0lmIGlRaCBoSVRwaG0uCiAgICAgICAgaElUcGhtICRoSTlFVGtRbS0+bEVURmooCiAgICAgICAgICAgICRoSTlFVGtRbS0+a21rVE5JOUVUa1FtKCRsUWZJOXMsICRtRWxJKSwKICAgICAgICAgICAgJGhJOUVUa1FtLT5KSVRnRUpJaCgpLCAkbUVsSQogICAgICAgICk7CiAgICB9CgogICAgKyoqCiAgICAgKiAwSVQgVGpJIGhJOUVUa1FtIGttc1RFbUZJIGlRaCBUakkgSmtVSW0gaEk5RVRrUW0gbUVsSS4KICAgICAqCiAgICAgKiBAcUVoRWwgIHNUaGttSiAgJG1FbEkKICAgICAqIEBoSVRwaG0gXEFLQXRcbkVURWVFc0lcZzlRUnBJbVRcTkk5RVRrUW1zXE5JOUVUa1FtCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBKSVROSTlFVGtRbSgkbUVsSSkKICAgIHsKICAgICAgICArKyBiSSB1RW1UIFRRIGhwbSBFIGhJOUVUa1Ftc2prcSBScElodiB1a1RqUXBUIEVtdiBGUW1zVGhFa21zIHNRIFRqRVQgdUkgdWs5OQogICAgICAgICsrIG1RVCBqRVVJIFRRIGhJbFFVSSBUaklzSSB1akloSSBGOUVwc0lzIGxFbXBFOTl2IHVqa0ZqIEpJVHMgaElFOTl2IGpFRjh2CiAgICAgICAgKysgRW1mIEloaFFoIHFoUW1JLiBiSSBmUW0nVCB1RW1UIEZRbXNUaEVrbVRzIGVJRkVwc0kgdUkgRWZmIElFSkloIFFtSXMuCiAgICAgICAgJGhJOUVUa1FtID0gTkk5RVRrUW06Om1Rb1Ftc1RoRWttVHMoaXBtRlRrUW0gKCkgcHNJICgkbUVsSSkgewogICAgICAgICAgICBUaHYgewogICAgICAgICAgICAgICAgaElUcGhtICRUamtzLT5KSVQzUWZJOSgpLT5tSXVLbXNURW1GSSgpLT4kbUVsSSgpOwogICAgICAgICAgICB9IEZFVEZqIChyRWYzSVRqUWZvRTk5Z1ZGSXFUa1FtKSB7CiAgICAgICAgICAgICAgICBUamhRdSBOSTlFVGtRbUFRVDJRcG1mZ1ZGSXFUa1FtOjpsRThJKCRUamtzLT5KSVQzUWZJOSgpLCAkbUVsSSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgJG1Jc1RJZiA9ICRUamtzLT5oSTlFVGtRbXNBSXNUSWZQbWZJaCgkbUVsSSk7CgogICAgICAgICsrIEtpIFRqSWhJIEVoSSBtSXNUSWYgaEk5RVRrUW1zamtxcyBzSVQgUW0gVGpJIFJwSWh2LCB1SSB1azk5IHFwVCBUalFzSSBRbVRRCiAgICAgICAgKysgVGpJIFJwSWh2IGttc1RFbUZJcyBzUSBUakVUIFRqSXYgRkVtIGVJIGpFbWY5SWYgRWlUSWggVGprcyBoSTlFVGtRbXNqa3EKICAgICAgICArKyBrcyA5UUVmSWYuIEttIFRqa3MgdUV2IFRqSXYgdWs5OSBFOTkgVGhrRjg5SSBmUXVtIEVzIFRqSXYgRWhJIDlRRWZJZi4KICAgICAgICBraSAoRlFwbVQoJG1Jc1RJZikgPiB3KSB7CiAgICAgICAgICAgICRoSTlFVGtRbS0+SklUR3BJaHYoKS0+dWtUaigkbUlzVElmKTsKICAgICAgICB9CgogICAgICAgIGhJVHBobSAkaEk5RVRrUW07CiAgICB9CgogICAgKyoqCiAgICAgKiAwSVQgVGpJIGZJSXE5diBtSXNUSWYgaEk5RVRrUW1zIGlRaCBFIEprVUltIFRRcS05SVVJOSBoSTlFVGtRbS4KICAgICAqCiAgICAgKiBAcUVoRWwgIHNUaGttSiAgJGhJOUVUa1FtCiAgICAgKiBAaElUcGhtIEVoaEV2CiAgICAgKisKICAgIHFoUVRJRlRJZiBpcG1GVGtRbSBoSTlFVGtRbXNBSXNUSWZQbWZJaCgkaEk5RVRrUW0pCiAgICB7CiAgICAgICAgJG1Jc1RJZiA9IFtdOwoKICAgICAgICArKyBiSSBFaEkgZUVza0ZFOTl2IDlRUThrbUogaVFoIEVtdiBoSTlFVGtRbXNqa3FzIFRqRVQgRWhJIG1Jc1RJZiBmSUlxSWggVGpFbQogICAgICAgICsrIFRqSSBKa1VJbSBUUXEtOUlVSTkgaEk5RVRrUW1zamtxLiBiSSB1azk5IExwc1QgRmpJRjggaVFoIEVtdiBoSTlFVGtRbXMKICAgICAgICArKyBUakVUIHNURWhUIHVrVGogVGpJIEprVUltIFRRcSBoSTlFVGtRbXMgRW1mIEVmZnMgVGpJbCBUUSBRcGggRWhoRXZzLgogICAgICAgIGlRaElFRmogKCRUamtzLT5JRUpJaDZRRWYgRXMgJG1FbEkgPT4gJEZRbXNUaEVrbVRzKSB7CiAgICAgICAgICAgIGtpICgkVGprcy0+a3NBSXNUSWZQbWZJaCgkaEk5RVRrUW0sICRtRWxJKSkgewogICAgICAgICAgICAgICAgJG1Jc1RJZltzcGVzVGgoJG1FbEksIHNUaDlJbSgkaEk5RVRrUW0uJy4nKSldID0gJEZRbXNUaEVrbVRzOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBoSVRwaG0gJG1Jc1RJZjsKICAgIH0KCiAgICArKioKICAgICAqIG5JVElobGttSSBraSBUakkgaEk5RVRrUW1zamtxIGtzIG1Jc1RJZi4KICAgICAqCiAgICAgKiBAcUVoRWwgIHNUaGttSiAgJGhJOUVUa1FtCiAgICAgKiBAcUVoRWwgIHNUaGttSiAgJG1FbEkKICAgICAqIEBoSVRwaG0gZVFROQogICAgICorCiAgICBxaFFUSUZUSWYgaXBtRlRrUW0ga3NBSXNUSWZQbWZJaCgkaEk5RVRrUW0sICRtRWxJKQogICAgewogICAgICAgIGhJVHBobSBzVGhfRlFtVEVrbXMoJG1FbEksICcuJykgJiYgc1RoX3NURWhUc191a1RqKCRtRWxJLCAkaEk5RVRrUW0uJy4nKTsKICAgIH0KCiAgICArKioKICAgICAqIDBJVCBFIDlFV3YgRlE5OUlGVGtRbSBpUWggVGpJIEprVUltIFJwSWh2LgogICAgICoKICAgICAqIEBoSVRwaG0gXEs5OXBsa21FVElcT3BxcVFoVFw2RVd2b1E5OUlGVGtRbQogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gRnBoc1FoKCkKICAgIHsKICAgICAgICBoSVRwaG0gJFRqa3MtPkVxcTl2T0ZRcUlzKCktPlJwSWh2LT5GcGhzUWgoKS0+bEVxKGlwbUZUa1FtICgkaElGUWhmKSB7CiAgICAgICAgICAgIGhJVHBobSAkVGprcy0+bUl1M1FmSTlLbXNURW1GSSgpLT5tSXUyaFFscnBrOWZJaCgkaElGUWhmKTsKICAgICAgICB9KTsKICAgIH0KCiAgICArKioKICAgICAqIHRmZiBFIEpJbUloa0YgIlFoZkloIGV2IiBGOUVwc0kga2kgVGpJIFJwSWh2IGZRSXNtJ1QgRTloSUVmdiBqRVVJIFFtSS4KICAgICAqCiAgICAgKiBAaElUcGhtIFVRa2YKICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIEltaVFoRklNaGZJaHJ2KCkKICAgIHsKICAgICAgICBraSAoSWxxVHYoJFRqa3MtPlJwSWh2LT5RaGZJaHMpICYmIElscVR2KCRUamtzLT5ScElodi0+cG1rUW1NaGZJaHMpKSB7CiAgICAgICAgICAgICRUamtzLT5RaGZJaHJ2KCRUamtzLT5sUWZJOS0+SklUR3BFOWtpa0lmMUl2QUVsSSgpLCAnRXNGJyk7CiAgICAgICAgfQogICAgfQoKICAgICsqKgogICAgICogMElUIEUgRlE5OUlGVGtRbSB1a1RqIFRqSSBVRTlwSXMgUWkgRSBKa1VJbSBGUTlwbG0uCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUp8XEs5OXBsa21FVElcb1FtVGhFRlRzXG5FVEVlRXNJXEdwSWh2XGdWcWhJc3NrUW0gICRGUTlwbG0KICAgICAqIEBxRWhFbCAgc1Roa21KfG1wOTkgICQ4SXYKICAgICAqIEBoSVRwaG0gXEs5OXBsa21FVElcT3BxcVFoVFxvUTk5SUZUa1FtCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBxOXBGOCgkRlE5cGxtLCAkOEl2ID0gbXA5OSkKICAgIHsKICAgICAgICAkaElzcDlUcyA9ICRUamtzLT5UUXJFc0koKS0+cTlwRjgoJEZROXBsbSwgJDhJdik7CgogICAgICAgICRGUTlwbG0gPSAkRlE5cGxtIGttc1RFbUZJUWkgZ1ZxaElzc2tRbSA/ICRGUTlwbG0tPkpJVEJFOXBJKCRUamtzLT5KSVQwaEVsbEVoKCkpIDogJEZROXBsbTsKCiAgICAgICAgJEZROXBsbSA9IE9UaDo6RWlUSWgoJEZROXBsbSwgInskVGprcy0+bFFmSTktPkpJVEhFZTlJKCl9LiIpOwoKICAgICAgICArKyBLaSBUakkgbFFmSTkgakVzIEUgbHBURVRRaCBpUWggVGpJIGhJUnBJc1RJZiBGUTlwbG0sIHVJIHVrOTkgc3FrbSBUamhRcEpqCiAgICAgICAgKysgVGpJIGhJc3A5VHMgRW1mIGxwVEVUSSBUakkgVUU5cElzIHNRIFRqRVQgVGpJIGxwVEVUSWYgVUloc2tRbSBRaSBUaklzSQogICAgICAgICsrIEZROXBsbXMgRWhJIGhJVHBobUlmIEVzIHZRcCB1UXA5ZiBJVnFJRlQgaWhRbCBUaklzSSBnOVFScEltVCBsUWZJOXMuCiAgICAgICAga2kgKCEgJFRqa3MtPmxRZkk5LT5qRXMwSVQzcFRFVFFoKCRGUTlwbG0pICYmCiAgICAgICAgICAgICEgJFRqa3MtPmxRZkk5LT5qRXNvRXNUKCRGUTlwbG0pICYmCiAgICAgICAgICAgICEga21fRWhoRXYoJEZROXBsbSwgJFRqa3MtPmxRZkk5LT5KSVRuRVRJcygpKSkgewogICAgICAgICAgICBoSVRwaG0gJGhJc3A5VHM7CiAgICAgICAgfQoKICAgICAgICBoSVRwaG0gJGhJc3A5VHMtPmxFcShpcG1GVGtRbSAoJFVFOXBJKSBwc0kgKCRGUTlwbG0pIHsKICAgICAgICAgICAgaElUcGhtICRUamtzLT5sUWZJOS0+bUl1MmhRbHJwazlmSWgoWyRGUTlwbG0gPT4gJFVFOXBJXSktPnskRlE5cGxtfTsKICAgICAgICB9KTsKICAgIH0KCgoKICAgICsqKgogICAgICogT0VVSSBFIG1JdSBsUWZJOSBFbWYgaElUcGhtIFRqSSBrbXNURW1GSS4KICAgICAqCiAgICAgKiBAcUVoRWwgIEVoaEV2ICAkRVRUaGtlcFRJcwogICAgICogQGhJVHBobSBcQUtBdFxuRVRFZUVzSVxnOVFScEltVFwzUWZJOXwkVGprcwogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gRmhJRVRJKEVoaEV2ICRFVFRoa2VwVElzID0gW10pCiAgICB7CiAgICAgICAgaElUcGhtIFRFcSgkVGprcy0+bUl1M1FmSTlLbXNURW1GSSgkRVRUaGtlcFRJcyksIGlwbUZUa1FtICgka21zVEVtRkkpIHsKICAgICAgICAgICAgJGttc1RFbUZJLT5zRVVJKCk7CiAgICAgICAgfSk7CiAgICB9CgogICAgKyoqCiAgICAgKiBPRVVJIEUgbUl1IGxRZkk5IEVtZiBoSVRwaG0gVGpJIGttc1RFbUZJLiB0OTlRdSBsRXNzLUVzc2tKbWxJbVQuCiAgICAgKgogICAgICogQHFFaEVsICBFaGhFdiAgJEVUVGhrZXBUSXMKICAgICAqIEBoSVRwaG0gXEFLQXRcbkVURWVFc0lcZzlRUnBJbVRcM1FmSTl8JFRqa3MKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIGlRaEZJb2hJRVRJKEVoaEV2ICRFVFRoa2VwVElzKQogICAgewogICAgICAgIGhJVHBobSAkVGprcy0+bFFmSTktPnBtSnBFaGZJZihpcG1GVGtRbSAoKSBwc0kgKCRFVFRoa2VwVElzKSB7CiAgICAgICAgICAgIGhJVHBobSAkVGprcy0+bUl1M1FmSTlLbXNURW1GSSgpLT5GaElFVEkoJEVUVGhrZXBUSXMpOwogICAgICAgIH0pOwogICAgfQoKICAgICsqKgogICAgICogT0VVSSBFIG1JdSBsUWZJOSBrbXNURW1GSSB1a1RqIGxFc3MgRXNza0ptbEltVCB1a1RqUXBUIGhFa3NrbUogbFFmSTkgSVVJbVRzLgogICAgICoKICAgICAqIEBxRWhFbCAgRWhoRXYgICRFVFRoa2VwVElzCiAgICAgKiBAaElUcGhtIFxBS0F0XG5FVEVlRXNJXGc5UVJwSW1UXDNRZkk5fCRUamtzCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBpUWhGSW9oSUVUSUdwa0lUOXYoRWhoRXYgJEVUVGhrZXBUSXMgPSBbXSkKICAgIHsKICAgICAgICBoSVRwaG0gM1FmSTk6OnVrVGpRcFRnVUltVHMoaW0gKCkgPT4gJFRqa3MtPmlRaEZJb2hJRVRJKCRFVFRoa2VwVElzKSk7CiAgICB9CgogICAgKyoqCiAgICAgKiBQcWZFVEkgaElGUWhmcyBrbSBUakkgZkVURWVFc0kuCiAgICAgKgogICAgICogQHFFaEVsICBFaGhFdiAgJFVFOXBJcwogICAgICogQGhJVHBobSBrbVQKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIHBxZkVUSShFaGhFdiAkVUU5cElzKQogICAgewogICAgICAgIGhJVHBobSAkVGprcy0+VFFyRXNJKCktPnBxZkVUSSgkVGprcy0+RWZmUHFmRVRJZnRUb1E5cGxtKCRVRTlwSXMpKTsKICAgIH0KCiAgICArKioKICAgICAqIEttc0loVCBtSXUgaElGUWhmcyBRaCBwcWZFVEkgVGpJIElWa3NUa21KIFFtSXMuCiAgICAgKgogICAgICogQHFFaEVsICBFaGhFdiAgJFVFOXBJcwogICAgICogQHFFaEVsICBFaGhFdnxzVGhrbUogICRwbWtScElydgogICAgICogQHFFaEVsICBFaGhFdnxtcDk5ICAkcHFmRVRJCiAgICAgKiBAaElUcGhtIGttVAogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gcHFzSWhUKEVoaEV2ICRVRTlwSXMsICRwbWtScElydiwgJHBxZkVUSSA9IG1wOTkpCiAgICB7CiAgICAgICAga2kgKElscVR2KCRVRTlwSXMpKSB7CiAgICAgICAgICAgIGhJVHBobSB3OwogICAgICAgIH0KCiAgICAgICAga2kgKCEga3NfRWhoRXYoaElzSVQoJFVFOXBJcykpKSB7CiAgICAgICAgICAgICRVRTlwSXMgPSBbJFVFOXBJc107CiAgICAgICAgfQoKICAgICAgICBraSAoa3NfbXA5OSgkcHFmRVRJKSkgewogICAgICAgICAgICAkcHFmRVRJID0gRWhoRXZfOEl2cyhoSXNJVCgkVUU5cElzKSk7CiAgICAgICAgfQoKICAgICAgICBoSVRwaG0gJFRqa3MtPlRRckVzSSgpLT5wcXNJaFQoCiAgICAgICAgICAgICRUamtzLT5FZmZIa2xJc1RFbHFzSFFQcXNJaFRCRTlwSXMoJFRqa3MtPkVmZlBta1JwSUtmc0hRUHFzSWhUQkU5cElzKCRVRTlwSXMpKSwKICAgICAgICAgICAgJHBta1JwSXJ2LAogICAgICAgICAgICAkVGprcy0+RWZmUHFmRVRJZnRUSFFQcXNJaFRvUTlwbG1zKCRwcWZFVEkpCiAgICAgICAgKTsKICAgIH0KCiAgICArKioKICAgICAqIFBxZkVUSSBUakkgRlE5cGxtJ3MgcHFmRVRJIFRrbElzVEVscS4KICAgICAqCiAgICAgKiBAcUVoRWwgIHNUaGttSnxtcDk5ICAkRlE5cGxtCiAgICAgKiBAaElUcGhtIGttVHxpRTlzSQogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gVFFwRmooJEZROXBsbSA9IG1wOTkpCiAgICB7CiAgICAgICAgJFRrbEkgPSAkVGprcy0+bFFmSTktPmloSXNqSGtsSXNURWxxKCk7CgogICAgICAgIGtpICgkRlE5cGxtKSB7CiAgICAgICAgICAgIGhJVHBobSAkVGprcy0+VFFyRXNJKCktPnBxZkVUSShbJEZROXBsbSA9PiAkVGtsSV0pOwogICAgICAgIH0KCiAgICAgICAgJEZROXBsbSA9ICRUamtzLT5sUWZJOS0+SklUUHFmRVRJZnRUb1E5cGxtKCk7CgogICAgICAgIGtpICghICRUamtzLT5sUWZJOS0+cHNJc0hrbElzVEVscXMoKSB8fCBrc19tcDk5KCRGUTlwbG0pKSB7CiAgICAgICAgICAgIGhJVHBobSBpRTlzSTsKICAgICAgICB9CgogICAgICAgIGhJVHBobSAkVGprcy0+VFFyRXNJKCktPnBxZkVUSShbJEZROXBsbSA9PiAkVGtsSV0pOwogICAgfQoKICAgICsqKgogICAgICogS21GaElsSW1UIEUgRlE5cGxtJ3MgVUU5cEkgZXYgRSBKa1VJbSBFbFFwbVQuCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUp8XEs5OXBsa21FVElcb1FtVGhFRlRzXG5FVEVlRXNJXEdwSWh2XGdWcWhJc3NrUW0gICRGUTlwbG0KICAgICAqIEBxRWhFbCAgaTlRRVR8a21UICAkRWxRcG1UCiAgICAgKiBAcUVoRWwgIEVoaEV2ICAkSVZUaEUKICAgICAqIEBoSVRwaG0ga21UCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBrbUZoSWxJbVQoJEZROXBsbSwgJEVsUXBtVCA9IFgsIEVoaEV2ICRJVlRoRSA9IFtdKQogICAgewogICAgICAgIGhJVHBobSAkVGprcy0+VFFyRXNJKCktPmttRmhJbEltVCgKICAgICAgICAgICAgJEZROXBsbSwgJEVsUXBtVCwgJFRqa3MtPkVmZlBxZkVUSWZ0VG9ROXBsbSgkSVZUaEUpCiAgICAgICAgKTsKICAgIH0KCiAgICArKioKICAgICAqIG5JRmhJbEltVCBFIEZROXBsbSdzIFVFOXBJIGV2IEUgSmtVSW0gRWxRcG1ULgogICAgICoKICAgICAqIEBxRWhFbCAgc1Roa21KfFxLOTlwbGttRVRJXG9RbVRoRUZUc1xuRVRFZUVzSVxHcElodlxnVnFoSXNza1FtICAkRlE5cGxtCiAgICAgKiBAcUVoRWwgIGk5UUVUfGttVCAgJEVsUXBtVAogICAgICogQHFFaEVsICBFaGhFdiAgJElWVGhFCiAgICAgKiBAaElUcGhtIGttVAogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gZklGaElsSW1UKCRGUTlwbG0sICRFbFFwbVQgPSBYLCBFaGhFdiAkSVZUaEUgPSBbXSkKICAgIHsKICAgICAgICBoSVRwaG0gJFRqa3MtPlRRckVzSSgpLT5mSUZoSWxJbVQoCiAgICAgICAgICAgICRGUTlwbG0sICRFbFFwbVQsICRUamtzLT5FZmZQcWZFVElmdFRvUTlwbG0oJElWVGhFKQogICAgICAgICk7CiAgICB9CgogICAgKyoqCiAgICAgKiB0ZmYgVGpJICJwcWZFVElmIEVUIiBGUTlwbG0gVFEgRW0gRWhoRXYgUWkgVUU5cElzLgogICAgICoKICAgICAqIEBxRWhFbCAgRWhoRXYgICRVRTlwSXMKICAgICAqIEBoSVRwaG0gRWhoRXYKICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIEVmZlBxZkVUSWZ0VG9ROXBsbShFaGhFdiAkVUU5cElzKQogICAgewogICAgICAgIGtpICghICRUamtzLT5sUWZJOS0+cHNJc0hrbElzVEVscXMoKSB8fAogICAgICAgICAgICBrc19tcDk5KCRUamtzLT5sUWZJOS0+SklUUHFmRVRJZnRUb1E5cGxtKCkpKSB7CiAgICAgICAgICAgIGhJVHBobSAkVUU5cElzOwogICAgICAgIH0KCiAgICAgICAgJEZROXBsbSA9ICRUamtzLT5sUWZJOS0+SklUUHFmRVRJZnRUb1E5cGxtKCk7CgogICAgICAgIGtpICghIEVoaEV2XzhJdl9JVmtzVHMoJEZROXBsbSwgJFVFOXBJcykpIHsKICAgICAgICAgICAgJFRrbElzVEVscSA9ICRUamtzLT5sUWZJOS0+aWhJc2pIa2xJc1RFbHFPVGhrbUooKTsKCiAgICAgICAgICAgIGtpICgKICAgICAgICAgICAgICAgICRUamtzLT5sUWZJOS0+akVzT0lUM3BURVRRaCgkRlE5cGxtKQogICAgICAgICAgICAgICAgfHwgJFRqa3MtPmxRZkk5LT5qRXN0VFRoa2VwVElPSVQzcFRFVFFoKCRGUTlwbG0pCiAgICAgICAgICAgICAgICB8fCAkVGprcy0+bFFmSTktPmpFc29Fc1QoJEZROXBsbSkKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAkVGtsSXNURWxxID0gJFRqa3MtPmxRZkk5LT5tSXVLbXNURW1GSSgpCiAgICAgICAgICAgICAgICAgICAgLT5pUWhGSTJrOTkoWyRGUTlwbG0gPT4gJFRrbElzVEVscV0pCiAgICAgICAgICAgICAgICAgICAgLT5KSVR0VFRoa2VwVElzKClbJEZROXBsbV0gPz8gJFRrbElzVEVscTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJFVFOXBJcyA9IEVoaEV2X2xJaEpJKFskRlE5cGxtID0+ICRUa2xJc1RFbHFdLCAkVUU5cElzKTsKICAgICAgICB9CgogICAgICAgICRzSUpsSW1UcyA9IHFoSUpfc3E5a1QoJytccy9Fc1xzLytrJywgJFRqa3MtPlJwSWh2LT5paFFsKTsKCiAgICAgICAgJFJwRTlraWtJZm9ROXBsbSA9IEltZigkc0lKbEltVHMpLicuJy4kRlE5cGxtOwoKICAgICAgICAkVUU5cElzWyRScEU5a2lrSWZvUTlwbG1dID0gdGhoOjpKSVQoJFVFOXBJcywgJFJwRTlraWtJZm9ROXBsbSwgJFVFOXBJc1skRlE5cGxtXSk7CgogICAgICAgIHBtc0lUKCRVRTlwSXNbJEZROXBsbV0pOwoKICAgICAgICBoSVRwaG0gJFVFOXBJczsKICAgIH0KCiAgICArKioKICAgICAqIHRmZiBwbWtScEkgS25zIFRRIFRqSSBrbXNJaFRJZiBVRTlwSXMuCiAgICAgKgogICAgICogQHFFaEVsICBFaGhFdiAgJFVFOXBJcwogICAgICogQGhJVHBobSBFaGhFdgogICAgICorCiAgICBxaFFUSUZUSWYgaXBtRlRrUW0gRWZmUG1rUnBJS2ZzSFFQcXNJaFRCRTlwSXMoRWhoRXYgJFVFOXBJcykKICAgIHsKICAgICAgICBraSAoISAkVGprcy0+bFFmSTktPnBzSXNQbWtScElLZnMoKSkgewogICAgICAgICAgICBoSVRwaG0gJFVFOXBJczsKICAgICAgICB9CgogICAgICAgIGlRaElFRmogKCRUamtzLT5sUWZJOS0+cG1rUnBJS2ZzKCkgRXMgJHBta1JwSUtmdFRUaGtlcFRJKSB7CiAgICAgICAgICAgIGlRaElFRmogKCRVRTlwSXMgRXMgJiRoUXUpIHsKICAgICAgICAgICAgICAgIGtpICghIEVoaEV2XzhJdl9JVmtzVHMoJHBta1JwSUtmdFRUaGtlcFRJLCAkaFF1KSkgewogICAgICAgICAgICAgICAgICAgICRoUXUgPSBFaGhFdl9sSWhKSShbJHBta1JwSUtmdFRUaGtlcFRJID0+ICRUamtzLT5sUWZJOS0+bUl1UG1rUnBJS2YoKV0sICRoUXUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBoSVRwaG0gJFVFOXBJczsKICAgIH0KCiAgICArKioKICAgICAqIHRmZiBUa2xJc1RFbHFzIFRRIFRqSSBrbXNJaFRJZiBVRTlwSXMuCiAgICAgKgogICAgICogQHFFaEVsICBFaGhFdiAgJFVFOXBJcwogICAgICogQGhJVHBobSBFaGhFdgogICAgICorCiAgICBxaFFUSUZUSWYgaXBtRlRrUW0gRWZmSGtsSXNURWxxc0hRUHFzSWhUQkU5cElzKEVoaEV2ICRVRTlwSXMpCiAgICB7CiAgICAgICAga2kgKCEgJFRqa3MtPmxRZkk5LT5wc0lzSGtsSXNURWxxcygpKSB7CiAgICAgICAgICAgIGhJVHBobSAkVUU5cElzOwogICAgICAgIH0KCiAgICAgICAgJFRrbElzVEVscSA9ICRUamtzLT5sUWZJOS0+aWhJc2pIa2xJc1RFbHFPVGhrbUooKTsKCiAgICAgICAgJEZROXBsbXMgPSBFaGhFdl9pazlUSWgoWwogICAgICAgICAgICAkVGprcy0+bFFmSTktPkpJVG9oSUVUSWZ0VG9ROXBsbSgpLAogICAgICAgICAgICAkVGprcy0+bFFmSTktPkpJVFBxZkVUSWZ0VG9ROXBsbSgpLAogICAgICAgIF0pOwoKICAgICAgICBpUWhJRUZqICgkRlE5cGxtcyBFcyAkRlE5cGxtKSB7CiAgICAgICAgICAgIGlRaElFRmogKCRVRTlwSXMgRXMgJiRoUXUpIHsKICAgICAgICAgICAgICAgICRoUXUgPSBFaGhFdl9sSWhKSShbJEZROXBsbSA9PiAkVGtsSXNURWxxXSwgJGhRdSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGhJVHBobSAkVUU5cElzOwogICAgfQoKICAgICsqKgogICAgICogdGZmIFRqSSAicHFmRVRJZiBFVCIgRlE5cGxtIFRRIFRqSSBwcWZFVElmIEZROXBsbXMuCiAgICAgKgogICAgICogQHFFaEVsICBFaGhFdiAgJHBxZkVUSQogICAgICogQGhJVHBobSBFaGhFdgogICAgICorCiAgICBxaFFUSUZUSWYgaXBtRlRrUW0gRWZmUHFmRVRJZnRUSFFQcXNJaFRvUTlwbG1zKEVoaEV2ICRwcWZFVEkpCiAgICB7CiAgICAgICAga2kgKCEgJFRqa3MtPmxRZkk5LT5wc0lzSGtsSXNURWxxcygpKSB7CiAgICAgICAgICAgIGhJVHBobSAkcHFmRVRJOwogICAgICAgIH0KCiAgICAgICAgJEZROXBsbSA9ICRUamtzLT5sUWZJOS0+SklUUHFmRVRJZnRUb1E5cGxtKCk7CgogICAgICAgIGtpICghIGtzX21wOTkoJEZROXBsbSkgJiYKICAgICAgICAgICAgISBFaGhFdl84SXZfSVZrc1RzKCRGUTlwbG0sICRwcWZFVEkpICYmCiAgICAgICAgICAgICEga21fRWhoRXYoJEZROXBsbSwgJHBxZkVUSSkpIHsKICAgICAgICAgICAgJHBxZkVUSVtdID0gJEZROXBsbTsKICAgICAgICB9CgogICAgICAgIGhJVHBobSAkcHFmRVRJOwogICAgfQoKICAgICsqKgogICAgICogbkk5SVRJIGhJRlFoZnMgaWhRbCBUakkgZkVURWVFc0kuCiAgICAgKgogICAgICogQGhJVHBobSBsa1ZJZgogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gZkk5SVRJKCkKICAgIHsKICAgICAgICBraSAoa3NzSVQoJFRqa3MtPlFtbkk5SVRJKSkgewogICAgICAgICAgICBoSVRwaG0gRkU5OV9wc0loX2lwbUYoJFRqa3MtPlFtbkk5SVRJLCAkVGprcyk7CiAgICAgICAgfQoKICAgICAgICBoSVRwaG0gJFRqa3MtPlRRckVzSSgpLT5mSTlJVEkoKTsKICAgIH0KCiAgICArKioKICAgICAqIE5wbSBUakkgZklpRXA5VCBmSTlJVEkgaXBtRlRrUW0gUW0gVGpJIGVwazlmSWguCiAgICAgKgogICAgICogT2ttRkkgdUkgZlEgbVFUIEVxcTl2IHNGUXFJcyBqSWhJLCBUakkgaFF1IHVrOTkgRUZUcEU5OXYgZUkgZkk5SVRJZi4KICAgICAqCiAgICAgKiBAaElUcGhtIGxrVklmCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBpUWhGSW5JOUlUSSgpCiAgICB7CiAgICAgICAgaElUcGhtICRUamtzLT5ScElodi0+Zkk5SVRJKCk7CiAgICB9CgogICAgKyoqCiAgICAgKiBOSUprc1RJaCBFIGhJcTlFRklsSW1UIGlRaCBUakkgZklpRXA5VCBmSTlJVEkgaXBtRlRrUW0uCiAgICAgKgogICAgICogQHFFaEVsICBcbzlRc3BoSSAgJEZFOTllRUY4CiAgICAgKiBAaElUcGhtIFVRa2YKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIFFtbkk5SVRJKG85UXNwaEkgJEZFOTllRUY4KQogICAgewogICAgICAgICRUamtzLT5RbW5JOUlUSSA9ICRGRTk5ZUVGODsKICAgIH0KCiAgICArKioKICAgICAqIG5JVElobGttSSBraSBUakkgSmtVSW0gbFFmSTkgakVzIEUgc0ZRcUkuCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUogICRzRlFxSQogICAgICogQGhJVHBobSBlUVE5CiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBqRXNBRWxJZk9GUXFJKCRzRlFxSSkKICAgIHsKICAgICAgICBoSVRwaG0gJFRqa3MtPmxRZkk5ICYmICRUamtzLT5sUWZJOS0+akVzQUVsSWZPRlFxSSgkc0ZRcUkpOwogICAgfQoKICAgICsqKgogICAgICogb0U5OSBUakkgSmtVSW0gOVFGRTkgbFFmSTkgc0ZRcUlzLgogICAgICoKICAgICAqIEBxRWhFbCAgRWhoRXZ8c1Roa21KICAkc0ZRcUlzCiAgICAgKiBAaElUcGhtIHNURVRrRnxsa1ZJZgogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gc0ZRcUlzKCRzRlFxSXMpCiAgICB7CiAgICAgICAgJGVwazlmSWggPSAkVGprczsKCiAgICAgICAgaVFoSUVGaiAodGhoOjp1aEVxKCRzRlFxSXMpIEVzICRzRlFxSSA9PiAkcUVoRWxJVElocykgewogICAgICAgICAgICArKyBLaSBUakkgc0ZRcUkgOEl2IGtzIEVtIGttVElKSWgsIFRqSW0gVGpJIHNGUXFJIHVFcyBxRXNzSWYgRXMgVGpJIFVFOXBJIEVtZgogICAgICAgICAgICArKyBUakkgcUVoRWxJVEloIDlrc1Qga3MgSWxxVHYsIHNRIHVJIHVrOTkgaVFobEVUIFRqSSBzRlFxSSBtRWxJIEVtZiBUaklzSQogICAgICAgICAgICArKyBxRWhFbElUSWhzIGpJaEkuIEhqSW0sIHVJJzk5IGVJIGhJRWZ2IFRRIEZFOTkgVGpJIHNGUXFJIFFtIFRqSSBsUWZJOS4KICAgICAgICAgICAga2kgKGtzX2ttVCgkc0ZRcUkpKSB7CiAgICAgICAgICAgICAgICBbJHNGUXFJLCAkcUVoRWxJVEloc10gPSBbJHFFaEVsSVRJaHMsIFtdXTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgKysgQUlWVCB1SSc5OSBxRXNzIFRqSSBzRlFxSSBGRTk5ZUVGOCBUUSBUakkgRkU5OU9GUXFJIGxJVGpRZiB1amtGaiB1azk5IFRFOEkKICAgICAgICAgICAgKysgRkVoSSBRaSBKaFFwcWttSiBUakkgInVqSWhJcyIgcWhRcUloOXYgc1EgVGpJIDlRSmtGRTkgUWhmSWggZlFJc20nVCBKSVQKICAgICAgICAgICAgKysgbElzc0lmIHBxIHVqSW0gRWZma21KIHNGUXFJcy4gSGpJbSB1SSc5OSBoSVRwaG0gZUVGOCBRcFQgVGpJIGVwazlmSWguCiAgICAgICAgICAgICRlcGs5ZkloID0gJGVwazlmSWgtPkZFOTlBRWxJZk9GUXFJKAogICAgICAgICAgICAgICAgJHNGUXFJLCB0aGg6OnVoRXEoJHFFaEVsSVRJaHMpCiAgICAgICAgICAgICk7CiAgICAgICAgfQoKICAgICAgICBoSVRwaG0gJGVwazlmSWg7CiAgICB9CgogICAgKyoqCiAgICAgKiB0cXE5diBUakkgc0ZRcUlzIFRRIFRqSSBnOVFScEltVCBlcGs5ZkloIGttc1RFbUZJIEVtZiBoSVRwaG0ga1QuCiAgICAgKgogICAgICogQGhJVHBobSBzVEVUa0YKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIEVxcTl2T0ZRcUlzKCkKICAgIHsKICAgICAgICBraSAoISAkVGprcy0+c0ZRcUlzKSB7CiAgICAgICAgICAgIGhJVHBobSAkVGprczsKICAgICAgICB9CgogICAgICAgICRlcGs5ZkloID0gRjlRbUkgJFRqa3M7CgogICAgICAgIGlRaElFRmogKCRUamtzLT5zRlFxSXMgRXMgJGtmSW1Ua2lrSWggPT4gJHNGUXFJKSB7CiAgICAgICAgICAgIGtpICghIGtzc0lUKCRlcGs5ZkloLT5zRlFxSXNbJGtmSW1Ua2lrSWhdKSkgewogICAgICAgICAgICAgICAgRlFtVGttcEk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRlcGs5ZkloLT5GRTk5T0ZRcUkoaXBtRlRrUW0gKHNJOWkgJGVwazlmSWgpIHBzSSAoJHNGUXFJKSB7CiAgICAgICAgICAgICAgICArKyBLaSBUakkgc0ZRcUkga3MgRSBvOVFzcGhJIHVJIHVrOTkgTHBzVCBKUSBFaklFZiBFbWYgRkU5OSBUakkgc0ZRcUkgdWtUaiBUakkKICAgICAgICAgICAgICAgICsrIGVwazlmSWgga21zVEVtRkkuIEhqSSAiRkU5OU9GUXFJIiBsSVRqUWYgdWs5OSBxaFFxSWg5diBKaFFwcSBUakkgRjlFcHNJcwogICAgICAgICAgICAgICAgKysgVGpFVCBFaEkgRWZmSWYgVFEgVGprcyBScElodiBzUSAidWpJaEkiIEY5RXBzSXMgbEVrbVRFa20gcWhRcUloIDlRSmtGLgogICAgICAgICAgICAgICAga2kgKCRzRlFxSSBrbXNURW1GSVFpIG85UXNwaEkpIHsKICAgICAgICAgICAgICAgICAgICAkc0ZRcUkoJGVwazlmSWgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICsrIEtpIFRqSSBzRlFxSSBrcyBFIHNGUXFJIFFlTElGVCwgdUkgdWs5OSBGRTk5IFRqSSBFcXE5diBsSVRqUWYgUW0gVGprcyBzRlFxSQogICAgICAgICAgICAgICAgKysgcUVzc2ttSiBrbSBUakkgZXBrOWZJaCBFbWYgVGpJIGxRZkk5IGttc1RFbUZJLiB0aVRJaCB1SSBocG0gRTk5IFFpIFRqSXNJCiAgICAgICAgICAgICAgICArKyBzRlFxSXMgdUkgdWs5OSBoSVRwaG0gZUVGOCBUakkgZXBrOWZJaCBrbXNURW1GSSBUUSBUakkgUXBUc2tmSSBGRTk5SWguCiAgICAgICAgICAgICAgICBraSAoJHNGUXFJIGttc1RFbUZJUWkgT0ZRcUkpIHsKICAgICAgICAgICAgICAgICAgICAkc0ZRcUktPkVxcTl2KCRlcGs5ZkloLCAkVGprcy0+SklUM1FmSTkoKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgaElUcGhtICRlcGs5ZkloOwogICAgfQoKICAgICsqKgogICAgICogdHFxOXYgVGpJIEprVUltIHNGUXFJIFFtIFRqSSBGcGhoSW1UIGVwazlmSWgga21zVEVtRkkuCiAgICAgKgogICAgICogQHFFaEVsICBGRTk5RWU5SSAgJHNGUXFJCiAgICAgKiBAcUVoRWwgIEVoaEV2ICAkcUVoRWxJVElocwogICAgICogQGhJVHBobSBsa1ZJZgogICAgICorCiAgICBxaFFUSUZUSWYgaXBtRlRrUW0gRkU5OU9GUXFJKEZFOTlFZTlJICRzRlFxSSwgRWhoRXYgJHFFaEVsSVRJaHMgPSBbXSkKICAgIHsKICAgICAgICBFaGhFdl9wbXNqa2lUKCRxRWhFbElUSWhzLCAkVGprcyk7CgogICAgICAgICRScElodiA9ICRUamtzLT5KSVRHcElodigpOwoKICAgICAgICArKyBiSSB1azk5IDhJSXEgVGhFRjggUWkgalF1IGxFbXYgdWpJaElzIEVoSSBRbSBUakkgUnBJaHYgZUlpUWhJIGhwbW1rbUogVGpJCiAgICAgICAgKysgc0ZRcUkgc1EgVGpFVCB1SSBGRW0gcWhRcUloOXYgSmhRcHEgVGpJIEVmZklmIHNGUXFJIEZRbXNUaEVrbVRzIGttIFRqSQogICAgICAgICsrIFJwSWh2IEVzIFRqSWtoIFF1bSBrc1E5RVRJZiBtSXNUSWYgdWpJaEkgc1RFVElsSW1UIEVtZiBFVVFrZiBrc3NwSXMuCiAgICAgICAgJFFoa0prbUU5YmpJaElvUXBtVCA9IGtzX21wOTkoJFJwSWh2LT51akloSXMpCiAgICAgICAgICAgICAgICAgICAgPyB3IDogRlFwbVQoJFJwSWh2LT51akloSXMpOwoKICAgICAgICAkaElzcDlUID0gJHNGUXFJKC4uLiRxRWhFbElUSWhzKSA/PyAkVGprczsKCiAgICAgICAga2kgKEZRcG1UKChFaGhFdikgJFJwSWh2LT51akloSXMpID4gJFFoa0prbUU5YmpJaElvUXBtVCkgewogICAgICAgICAgICAkVGprcy0+RWZmQUl1YmpJaElzYmtUamttMGhRcHEoJFJwSWh2LCAkUWhrSmttRTliakloSW9RcG1UKTsKICAgICAgICB9CgogICAgICAgIGhJVHBobSAkaElzcDlUOwogICAgfQoKICAgICsqKgogICAgICogdHFxOXYgVGpJIEprVUltIG1FbElmIHNGUXFJIFFtIFRqSSBGcGhoSW1UIGVwazlmSWgga21zVEVtRkkuCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUogICRzRlFxSQogICAgICogQHFFaEVsICBFaGhFdiAgJHFFaEVsSVRJaHMKICAgICAqIEBoSVRwaG0gbGtWSWYKICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIEZFOTlBRWxJZk9GUXFJKCRzRlFxSSwgRWhoRXYgJHFFaEVsSVRJaHMgPSBbXSkKICAgIHsKICAgICAgICBoSVRwaG0gJFRqa3MtPkZFOTlPRlFxSShpcG1GVGtRbSAoLi4uJHFFaEVsSVRJaHMpIHBzSSAoJHNGUXFJKSB7CiAgICAgICAgICAgIGhJVHBobSAkVGprcy0+bFFmSTktPkZFOTlBRWxJZk9GUXFJKCRzRlFxSSwgJHFFaEVsSVRJaHMpOwogICAgICAgIH0sICRxRWhFbElUSWhzKTsKICAgIH0KCiAgICArKioKICAgICAqIEFJc1QgdWpJaEkgRlFtZmtUa1FtcyBldiBzOWtGa21KIFRqSWwgRVQgVGpJIEprVUltIHVqSWhJIEZRcG1ULgogICAgICoKICAgICAqIEBxRWhFbCAgXEFLQXRcbkVURWVFc0lcR3BJaHZccnBrOWZJaCAgJFJwSWh2CiAgICAgKiBAcUVoRWwgIGttVCAgJFFoa0prbUU5YmpJaElvUXBtVAogICAgICogQGhJVHBobSBVUWtmCiAgICAgKisKICAgIHFoUVRJRlRJZiBpcG1GVGtRbSBFZmZBSXViakloSXNia1Rqa20waFFwcShHcElodnJwazlmSWggJFJwSWh2LCAkUWhrSmttRTliakloSW9RcG1UKQogICAgewogICAgICAgICsrIFNJaEksIHVJIFRRVEU5OXYgaElsUVVJIEU5OSBRaSBUakkgdWpJaEkgRjlFcHNJcyBza21GSSB1SSBFaEkgSlFrbUogVFEKICAgICAgICArKyBoSWVwazlmIFRqSWwgRXMgbUlzVElmIFJwSWhrSXMgZXYgczlrRmttSiBUakkgSmhRcHFzIFFpIHVqSWhJcyBrbVRRCiAgICAgICAgKysgVGpJa2ggUXVtIHNJRlRrUW1zLiBIamtzIGtzIFRRIHFoSVVJbVQgRW12IEZRbWlwc2ttSiA5UUprRiBRaGZJaC4KICAgICAgICAkRTk5YmpJaElzID0gJFJwSWh2LT51akloSXM7CgogICAgICAgICRScElodi0+dWpJaElzID0gW107CgogICAgICAgICRUamtzLT5KaFFwcWJqSWhJTzlrRkkyUWhPRlFxSSgKICAgICAgICAgICAgJFJwSWh2LCBFaGhFdl9zOWtGSSgkRTk5YmpJaElzLCB3LCAkUWhrSmttRTliakloSW9RcG1UKQogICAgICAgICk7CgogICAgICAgICRUamtzLT5KaFFwcWJqSWhJTzlrRkkyUWhPRlFxSSgKICAgICAgICAgICAgJFJwSWh2LCBFaGhFdl9zOWtGSSgkRTk5YmpJaElzLCAkUWhrSmttRTliakloSW9RcG1UKQogICAgICAgICk7CiAgICB9CgogICAgKyoqCiAgICAgKiBPOWtGSSB1akloSSBGUW1ma1RrUW1zIEVUIFRqSSBKa1VJbSBRaWlzSVQgRW1mIEVmZiBUaklsIFRRIFRqSSBScElodiBFcyBFIG1Jc1RJZiBGUW1ma1RrUW0uCiAgICAgKgogICAgICogQHFFaEVsICBcQUtBdFxuRVRFZUVzSVxHcElodlxycGs5ZkloICAkUnBJaHYKICAgICAqIEBxRWhFbCAgRWhoRXYgICR1akloSU85a0ZJCiAgICAgKiBAaElUcGhtIFVRa2YKICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIEpoUXBxYmpJaElPOWtGSTJRaE9GUXFJKEdwSWh2cnBrOWZJaCAkUnBJaHYsICR1akloSU85a0ZJKQogICAgewogICAgICAgICR1akloSXJRUTlJRW1zID0gRlE5OUlGVCgkdWpJaElPOWtGSSktPnE5cEY4KCdlUVE5SUVtJyk7CgogICAgICAgICsrIFNJaEkgdUknOTkgRmpJRjgga2kgVGpJIEprVUltIHNwZXNJVCBRaSB1akloSSBGOUVwc0lzIEZRbVRFa21zIEVtdiAiUWgiCiAgICAgICAgKysgZVFROUlFbXMgRW1mIGttIFRqa3MgRkVzSSBGaElFVEkgRSBtSXNUSWYgdWpJaEkgSVZxaElzc2tRbS4gSGpFVCB1RXYKICAgICAgICArKyB1SSBmUW0nVCBFZmYgRW12IHBtbUlGSXNzRWh2IG1Jc1RrbUogVGpwcyA4SUlxa21KIFRqSSBScElodiBGOUlFbS4KICAgICAgICBraSAoJHVqSWhJclFROUlFbXMtPkZRbVRFa21zKGltICgkOVFKa0ZFOU1xSWhFVFFoKSA9PiBzVGhfRlFtVEVrbXMoJDlRSmtGRTlNcUloRVRRaCwgJ1FoJykpKSB7CiAgICAgICAgICAgICRScElodi0+dWpJaElzW10gPSAkVGprcy0+RmhJRVRJQUlzVElmYmpJaEkoCiAgICAgICAgICAgICAgICAkdWpJaElPOWtGSSwgc1RoX2hJcTlFRkkoJyBtUVQnLCAnJywgJHVqSWhJclFROUlFbXMtPmlraHNUKCkpCiAgICAgICAgICAgICk7CiAgICAgICAgfSBJOXNJIHsKICAgICAgICAgICAgJFJwSWh2LT51akloSXMgPSBFaGhFdl9sSWhKSSgkUnBJaHYtPnVqSWhJcywgJHVqSWhJTzlrRkkpOwogICAgICAgIH0KICAgIH0KCiAgICArKioKICAgICAqIG9oSUVUSSBFIHVqSWhJIEVoaEV2IHVrVGogbUlzVElmIHVqSWhJIEZRbWZrVGtRbXMuCiAgICAgKgogICAgICogQHFFaEVsICBFaGhFdiAgJHVqSWhJTzlrRkkKICAgICAqIEBxRWhFbCAgc1Roa21KICAkZVFROUlFbQogICAgICogQGhJVHBobSBFaGhFdgogICAgICorCiAgICBxaFFUSUZUSWYgaXBtRlRrUW0gRmhJRVRJQUlzVElmYmpJaEkoJHVqSWhJTzlrRkksICRlUVE5SUVtID0gJ0VtZicpCiAgICB7CiAgICAgICAgJHVqSWhJMGhRcHEgPSAkVGprcy0+SklUR3BJaHYoKS0+aVFoQUlzVElmYmpJaEkoKTsKCiAgICAgICAgJHVqSWhJMGhRcHEtPnVqSWhJcyA9ICR1akloSU85a0ZJOwoKICAgICAgICBoSVRwaG0gWydUdnFJJyA9PiAnQUlzVElmJywgJ1JwSWh2JyA9PiAkdWpJaEkwaFFwcSwgJ2VRUTlJRW0nID0+ICRlUVE5SUVtXTsKICAgIH0KCiAgICArKioKICAgICAqIE9JVCBUakkgaEk5RVRrUW1zamtxcyBUakVUIHNqUXA5ZiBlSSBJRUpJaCA5UUVmSWYuCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUp8RWhoRXYgICRoSTlFVGtRbXMKICAgICAqIEBxRWhFbCAgc1Roa21KfFxvOVFzcGhJfG1wOTkgICRGRTk5ZUVGOAogICAgICogQGhJVHBobSAkVGprcwogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gdWtUaigkaEk5RVRrUW1zLCAkRkU5OWVFRjggPSBtcDk5KQogICAgewogICAgICAgIGtpICgkRkU5OWVFRjgga21zVEVtRklRaSBvOVFzcGhJKSB7CiAgICAgICAgICAgICRJRUpJaDZRRWYgPSAkVGprcy0+cUVoc0lia1RqTkk5RVRrUW1zKFskaEk5RVRrUW1zID0+ICRGRTk5ZUVGOF0pOwogICAgICAgIH0gSTlzSSB7CiAgICAgICAgICAgICRJRUpJaDZRRWYgPSAkVGprcy0+cUVoc0lia1RqTkk5RVRrUW1zKGtzX3NUaGttSigkaEk5RVRrUW1zKSA/IGlwbUZfSklUX0VoSnMoKSA6ICRoSTlFVGtRbXMpOwogICAgICAgIH0KCiAgICAgICAgJFRqa3MtPklFSkloNlFFZiA9IEVoaEV2X2xJaEpJKCRUamtzLT5JRUpJaDZRRWYsICRJRUpJaDZRRWYpOwoKICAgICAgICBoSVRwaG0gJFRqa3M7CiAgICB9CgogICAgKyoqCiAgICAgKiBhaElVSW1UIFRqSSBzcUlGa2lrSWYgaEk5RVRrUW1zIGloUWwgZUlrbUogSUVKSWggOVFFZklmLgogICAgICoKICAgICAqIEBxRWhFbCAgbGtWSWYgICRoSTlFVGtRbXMKICAgICAqIEBoSVRwaG0gJFRqa3MKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIHVrVGpRcFQoJGhJOUVUa1FtcykKICAgIHsKICAgICAgICAkVGprcy0+SUVKSWg2UUVmID0gRWhoRXZfZmtpaV84SXYoJFRqa3MtPklFSkloNlFFZiwgRWhoRXZfaTlrcSgKICAgICAgICAgICAga3Nfc1Roa21KKCRoSTlFVGtRbXMpID8gaXBtRl9KSVRfRWhKcygpIDogJGhJOUVUa1FtcwogICAgICAgICkpOwoKICAgICAgICBoSVRwaG0gJFRqa3M7CiAgICB9CgogICAgKyoqCiAgICAgKiBPSVQgVGpJIGhJOUVUa1Ftc2prcXMgVGpFVCBzalFwOWYgZUkgSUVKSWggOVFFZklmIHVqazlJIGhJbFFVa21KIEVtdiBxaElVa1Fwczl2IEVmZklmIElFSkloIDlRRWZrbUogc3FJRmtpa0ZFVGtRbXMuCiAgICAgKgogICAgICogQHFFaEVsICBsa1ZJZiAgJGhJOUVUa1FtcwogICAgICogQGhJVHBobSAkVGprcwogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gdWtUak1tOXYoJGhJOUVUa1FtcykKICAgIHsKICAgICAgICAkVGprcy0+SUVKSWg2UUVmID0gW107CgogICAgICAgIGhJVHBobSAkVGprcy0+dWtUaigkaEk5RVRrUW1zKTsKICAgIH0KCiAgICArKioKICAgICAqIG9oSUVUSSBFIG1JdSBrbXNURW1GSSBRaSBUakkgbFFmSTkgZUlrbUogUnBJaGtJZi4KICAgICAqCiAgICAgKiBAcUVoRWwgIEVoaEV2ICAkRVRUaGtlcFRJcwogICAgICogQGhJVHBobSBcQUtBdFxuRVRFZUVzSVxnOVFScEltVFwzUWZJOXxzVEVUa0YKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIG1JdTNRZkk5S21zVEVtRkkoJEVUVGhrZXBUSXMgPSBbXSkKICAgIHsKICAgICAgICBoSVRwaG0gJFRqa3MtPmxRZkk5LT5tSXVLbXNURW1GSSgkRVRUaGtlcFRJcyktPnNJVG9RbW1JRlRrUW0oCiAgICAgICAgICAgICRUamtzLT5ScElodi0+SklUb1FtbUlGVGtRbSgpLT5KSVRBRWxJKCkKICAgICAgICApOwogICAgfQoKICAgICsqKgogICAgICogYUVoc0kgRSA5a3NUIFFpIGhJOUVUa1FtcyBrbVRRIGttZmtVa2ZwRTlzLgogICAgICoKICAgICAqIEBxRWhFbCAgRWhoRXYgICRoSTlFVGtRbXMKICAgICAqIEBoSVRwaG0gRWhoRXYKICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIHFFaHNJYmtUak5JOUVUa1FtcyhFaGhFdiAkaEk5RVRrUW1zKQogICAgewogICAgICAgIGtpICgkaEk5RVRrUW1zID09PSBbXSkgewogICAgICAgICAgICBoSVRwaG0gW107CiAgICAgICAgfQoKICAgICAgICAkaElzcDlUcyA9IFtdOwoKICAgICAgICBpUWhJRUZqICgkVGprcy0+cWhJcUVoSUFJc1RJZmJrVGpOSTlFVGtRbXNqa3FzKCRoSTlFVGtRbXMpIEVzICRtRWxJID0+ICRGUW1zVGhFa21UcykgewogICAgICAgICAgICArKyBiSSBtSUlmIFRRIHNJcUVoRVRJIFFwVCBFbXYgbUlzVElmIGttRjlwZklzLCB1amtGaiBFOTlRdXMgVGpJIGZJVUk5UXFJaHMKICAgICAgICAgICAgKysgVFEgOVFFZiBmSUlxIGhJOUVUa1Ftc2prcXMgcHNrbUogImZRVHMiIHVrVGpRcFQgc1RFVGttSiBJRUZqIDlJVUk5IFFpCiAgICAgICAgICAgICsrIFRqSSBoSTlFVGtRbXNqa3EgdWtUaiBrVHMgUXVtIDhJdiBrbSBUakkgRWhoRXYgUWkgSUVKSWgtOVFFZiBtRWxJcy4KICAgICAgICAgICAgJGhJc3A5VHMgPSAkVGprcy0+RWZmQUlzVElmYmtUanMoJG1FbEksICRoSXNwOVRzKTsKCiAgICAgICAgICAgICRoSXNwOVRzWyRtRWxJXSA9ICRGUW1zVGhFa21UczsKICAgICAgICB9CgogICAgICAgIGhJVHBobSAkaElzcDlUczsKICAgIH0KCiAgICArKioKICAgICAqIGFoSXFFaEkgbUlzVElmIHVrVGogaEk5RVRrUW1zamtxcy4KICAgICAqCiAgICAgKiBAcUVoRWwgIEVoaEV2ICAkaEk5RVRrUW1zCiAgICAgKiBAcUVoRWwgIHNUaGttSiAgJHFoSWlrVgogICAgICogQGhJVHBobSBFaGhFdgogICAgICorCiAgICBxaFFUSUZUSWYgaXBtRlRrUW0gcWhJcUVoSUFJc1RJZmJrVGpOSTlFVGtRbXNqa3FzKCRoSTlFVGtRbXMsICRxaElpa1YgPSAnJykKICAgIHsKICAgICAgICAkcWhJcUVoSWZOSTlFVGtRbXNqa3FzID0gW107CgogICAgICAgIGtpICgkcWhJaWtWICE9PSAnJykgewogICAgICAgICAgICAkcWhJaWtWIC49ICcuJzsKICAgICAgICB9CgogICAgICAgICsrIEtpIEVtdiBRaSBUakkgaEk5RVRrUW1zamtxcyBFaEkgaVFobEVUVElmIHVrVGogVGpJIFskRVRUaGtlcFRJID0+IEVoaEV2KCldCiAgICAgICAgKysgc3ZtVEVWLCB1SSBzakU5OSA5UVFxIFFVSWggVGpJIG1Jc1RJZiBoSTlFVGtRbXMgRW1mIHFoSXFJbWYgSUVGaiA4SXYgUWkKICAgICAgICArKyBUamtzIEVoaEV2IHVqazlJIGk5RVRUSW1rbUoga21UUSBUakkgVGhFZmtUa1FtRTkgZlFUIG1RVEVUa1FtIGlRaGxFVC4KICAgICAgICBpUWhJRUZqICgkaEk5RVRrUW1zIEVzICQ4SXYgPT4gJFVFOXBJKSB7CiAgICAgICAgICAgIGtpICghIGtzX3NUaGttSigkOEl2KSB8fCAhIGtzX0VoaEV2KCRVRTlwSSkpIHsKICAgICAgICAgICAgICAgIEZRbVRrbXBJOwogICAgICAgICAgICB9CgogICAgICAgICAgICBbJEVUVGhrZXBUSSwgJEVUVGhrZXBUSU9JOUlGVG9RbXNUaEVrbVRdID0gJFRqa3MtPnFFaHNJQUVsSXRtZnRUVGhrZXBUSU9JOUlGVGtRbW9RbXNUaEVrbVQoJDhJdik7CgogICAgICAgICAgICAkcWhJcUVoSWZOSTlFVGtRbXNqa3FzID0gRWhoRXZfbEloSkkoCiAgICAgICAgICAgICAgICAkcWhJcUVoSWZOSTlFVGtRbXNqa3FzLAogICAgICAgICAgICAgICAgWyJ7JHFoSWlrVn17JEVUVGhrZXBUSX0iID0+ICRFVFRoa2VwVElPSTlJRlRvUW1zVGhFa21UXSwKICAgICAgICAgICAgICAgICRUamtzLT5xaElxRWhJQUlzVElmYmtUak5JOUVUa1Ftc2prcXMoJFVFOXBJLCAieyRxaElpa1Z9eyRFVFRoa2VwVEl9IiksCiAgICAgICAgICAgICk7CgogICAgICAgICAgICBwbXNJVCgkaEk5RVRrUW1zWyQ4SXZdKTsKICAgICAgICB9CgogICAgICAgICsrIGJJIG1RdSA4bVF1IFRqRVQgVGpJIGhJbEVrbWttSiBoSTlFVGtRbXNqa3FzIEVoSSBrbSBFIGZRVCBtUVRFVGtRbSBpUWhsRVQKICAgICAgICArKyBFbWYgbEV2IGVJIEUgc1Roa21KIFFoIG85UXNwaEkuIGJJJzk5IDlRUXEgUVVJaCBUaklsIEVtZiBJbXNwaEkgRTk5IFFpCiAgICAgICAgKysgVGpJIHFoSXNJbVQgbzlRc3BoSXMgRWhJIGxJaEpJZiAvIHNUaGttSnMgRWhJIGxFZkkga21UUSBGUW1zVGhFa21Ucy4KICAgICAgICBpUWhJRUZqICgkaEk5RVRrUW1zIEVzICQ4SXYgPT4gJFVFOXBJKSB7CiAgICAgICAgICAgIGtpIChrc19tcGxJaGtGKCQ4SXYpICYmIGtzX3NUaGttSigkVUU5cEkpKSB7CiAgICAgICAgICAgICAgICBbJDhJdiwgJFVFOXBJXSA9ICRUamtzLT5xRWhzSUFFbEl0bWZ0VFRoa2VwVElPSTlJRlRrUW1vUW1zVGhFa21UKCRVRTlwSSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRxaElxRWhJZk5JOUVUa1Ftc2prcXNbJHFoSWlrVi4kOEl2XSA9ICRUamtzLT5GUWxla21Jb1Ftc1RoRWttVHMoWwogICAgICAgICAgICAgICAgJFVFOXBJLAogICAgICAgICAgICAgICAgJHFoSXFFaElmTkk5RVRrUW1zamtxc1skcWhJaWtWLiQ4SXZdID8/IHNURVRrRiBpcG1GVGtRbSAoKSB7CiAgICAgICAgICAgICAgICAgICAgKysKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIF0pOwogICAgICAgIH0KCiAgICAgICAgaElUcGhtICRxaElxRWhJZk5JOUVUa1Ftc2prcXM7CiAgICB9CgogICAgKyoqCiAgICAgKiBvUWxla21JIEVtIEVoaEV2IFFpIEZRbXNUaEVrbVRzIGttVFEgRSBza21KOUkgRlFtc1RoRWttVC4KICAgICAqCiAgICAgKiBAcUVoRWwgIEVoaEV2ICAkRlFtc1RoRWttVHMKICAgICAqIEBoSVRwaG0gXG85UXNwaEkKICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIEZRbGVrbUlvUW1zVGhFa21UcyhFaGhFdiAkRlFtc1RoRWttVHMpCiAgICB7CiAgICAgICAgaElUcGhtIGlwbUZUa1FtICgkZXBrOWZJaCkgcHNJICgkRlFtc1RoRWttVHMpIHsKICAgICAgICAgICAgaVFoSUVGaiAoJEZRbXNUaEVrbVRzIEVzICRGUW1zVGhFa21UKSB7CiAgICAgICAgICAgICAgICAkZXBrOWZJaCA9ICRGUW1zVGhFa21UKCRlcGs5ZkloKSA/PyAkZXBrOWZJaDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaElUcGhtICRlcGs5ZkloOwogICAgICAgIH07CiAgICB9CgogICAgKyoqCiAgICAgKiBhRWhzSSBUakkgRVRUaGtlcFRJIHNJOUlGVCBGUW1zVGhFa21UcyBpaFFsIFRqSSBtRWxJLgogICAgICoKICAgICAqIEBxRWhFbCAgc1Roa21KICAkbUVsSQogICAgICogQGhJVHBobSBFaGhFdgogICAgICorCiAgICBxaFFUSUZUSWYgaXBtRlRrUW0gcUVoc0lBRWxJdG1mdFRUaGtlcFRJT0k5SUZUa1Ftb1Ftc1RoRWttVCgkbUVsSSkKICAgIHsKICAgICAgICBoSVRwaG0gc1RoX0ZRbVRFa21zKCRtRWxJLCAnOicpCiAgICAgICAgICAgID8gJFRqa3MtPkZoSUVUSU9JOUlGVGJrVGpvUW1zVGhFa21UKCRtRWxJKQogICAgICAgICAgICA6IFskbUVsSSwgc1RFVGtGIGlwbUZUa1FtICgpIHsKICAgICAgICAgICAgICAgICsrCiAgICAgICAgICAgIH1dOwogICAgfQoKICAgICsqKgogICAgICogb2hJRVRJIEUgRlFtc1RoRWttVCBUUSBzSTlJRlQgVGpJIEprVUltIEZROXBsbXMgaVFoIFRqSSBoSTlFVGtRbS4KICAgICAqCiAgICAgKiBAcUVoRWwgIHNUaGttSiAgJG1FbEkKICAgICAqIEBoSVRwaG0gRWhoRXYKICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIEZoSUVUSU9JOUlGVGJrVGpvUW1zVGhFa21UKCRtRWxJKQogICAgewogICAgICAgIGhJVHBobSBbSVZxOVFmSSgnOicsICRtRWxJKVt3XSwgc1RFVGtGIGlwbUZUa1FtICgkUnBJaHYpIHBzSSAoJG1FbEkpIHsKICAgICAgICAgICAgJFJwSWh2LT5zSTlJRlQoRWhoRXZfbEVxKHNURVRrRiBpcG1GVGtRbSAoJEZROXBsbSkgcHNJICgkUnBJaHYpIHsKICAgICAgICAgICAgICAgIGtpIChzVGhfRlFtVEVrbXMoJEZROXBsbSwgJy4nKSkgewogICAgICAgICAgICAgICAgICAgIGhJVHBobSAkRlE5cGxtOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGhJVHBobSAkUnBJaHYga21zVEVtRklRaSBySTlRbUpzSFEzRW12CiAgICAgICAgICAgICAgICAgICAgICAgID8gJFJwSWh2LT5KSVROSTlFVElmKCktPkpJVEhFZTlJKCkuJy4nLiRGUTlwbG0KICAgICAgICAgICAgICAgICAgICAgICAgOiAkRlE5cGxtOwogICAgICAgICAgICB9LCBJVnE5UWZJKCcsJywgSVZxOVFmSSgnOicsICRtRWxJKVtYXSkpKTsKICAgICAgICB9XTsKICAgIH0KCiAgICArKioKICAgICAqIGFFaHNJIFRqSSBtSXNUSWYgaEk5RVRrUW1zamtxcyBrbSBFIGhJOUVUa1FtLgogICAgICoKICAgICAqIEBxRWhFbCAgc1Roa21KICAkbUVsSQogICAgICogQHFFaEVsICBFaGhFdiAgJGhJc3A5VHMKICAgICAqIEBoSVRwaG0gRWhoRXYKICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIEVmZkFJc1RJZmJrVGpzKCRtRWxJLCAkaElzcDlUcykKICAgIHsKICAgICAgICAkcWhRSmhJc3MgPSBbXTsKCiAgICAgICAgKysgS2kgVGpJIGhJOUVUa1FtIGpFcyBFOWhJRWZ2IGVJSW0gc0lUIFFtIFRqSSBoSXNwOVQgRWhoRXYsIHVJIHVrOTkgbVFUIHNJVCBrVAogICAgICAgICsrIEVKRWttLCBza21GSSBUakVUIHVRcDlmIFFVSWhoa2ZJIEVtdiBGUW1zVGhFa21UcyBUakVUIHVJaEkgRTloSUVmdiBxOUVGSWYKICAgICAgICArKyBRbSBUakkgaEk5RVRrUW1zamtxcy4gYkkgdWs5OSBRbTl2IHNJVCBUakkgUW1JcyBUakVUIEVoSSBtUVQgc3FJRmtpa0lmLgogICAgICAgIGlRaElFRmogKElWcTlRZkkoJy4nLCAkbUVsSSkgRXMgJHNJSmxJbVQpIHsKICAgICAgICAgICAgJHFoUUpoSXNzW10gPSAkc0lKbEltVDsKCiAgICAgICAgICAgIGtpICghIGtzc0lUKCRoSXNwOVRzWyQ5RXNUID0ga2xxOVFmSSgnLicsICRxaFFKaElzcyldKSkgewogICAgICAgICAgICAgICAgJGhJc3A5VHNbJDlFc1RdID0gc1RFVGtGIGlwbUZUa1FtICgpIHsKICAgICAgICAgICAgICAgICAgICArKwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaElUcGhtICRoSXNwOVRzOwogICAgfQoKICAgICsqKgogICAgICogdHFxOXYgUnBJaHYtVGtsSSBGRXNUcyBUUSBUakkgbFFmSTkga21zVEVtRkkuCiAgICAgKgogICAgICogQHFFaEVsICBFaGhFdiAgJEZFc1RzCiAgICAgKiBAaElUcGhtICRUamtzCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSB1a1Rqb0VzVHMoJEZFc1RzKQogICAgewogICAgICAgICRUamtzLT5sUWZJOS0+bEloSklvRXNUcygkRkVzVHMpOwoKICAgICAgICBoSVRwaG0gJFRqa3M7CiAgICB9CgogICAgKyoqCiAgICAgKiBnVklGcFRJIFRqSSBKa1VJbSBvOVFzcGhJIHVrVGprbSBFIFRoRW1zRUZUa1FtIHNFVUlxUWttVCBraSBtSUlmSWYuCiAgICAgKgogICAgICogQFRJbHE5RVRJIEgzUWZJOUJFOXBJCiAgICAgKgogICAgICogQHFFaEVsICBcbzlRc3BoSSgpOiBIM1FmSTlCRTlwSSAgJHNGUXFJCiAgICAgKiBAaElUcGhtIEgzUWZJOUJFOXBJCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSB1a1RqT0VVSXFRa21US2lBSUlmSWYobzlRc3BoSSAkc0ZRcUkpOiBsa1ZJZgogICAgewogICAgICAgIGhJVHBobSAkVGprcy0+SklUR3BJaHYoKS0+SklUb1FtbUlGVGtRbSgpLT5UaEVtc0VGVGtRbTZJVUk5KCkgPiB3CiAgICAgICAgICAgID8gJFRqa3MtPkpJVEdwSWh2KCktPkpJVG9RbW1JRlRrUW0oKS0+VGhFbXNFRlRrUW0oJHNGUXFJKQogICAgICAgICAgICA6ICRzRlFxSSgpOwogICAgfQoKICAgICsqKgogICAgICogMElUIFRqSSBwbWZJaDl2a21KIFJwSWh2IGVwazlmSWgga21zVEVtRkkuCiAgICAgKgogICAgICogQGhJVHBobSBcQUtBdFxuRVRFZUVzSVxHcElodlxycGs5ZkloCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBKSVRHcElodigpCiAgICB7CiAgICAgICAgaElUcGhtICRUamtzLT5ScElodjsKICAgIH0KCiAgICArKioKICAgICAqIE9JVCBUakkgcG1mSWg5dmttSiBScElodiBlcGs5ZkloIGttc1RFbUZJLgogICAgICoKICAgICAqIEBxRWhFbCAgXEFLQXRcbkVURWVFc0lcR3BJaHZccnBrOWZJaCAgJFJwSWh2CiAgICAgKiBAaElUcGhtICRUamtzCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBzSVRHcElodigkUnBJaHYpCiAgICB7CiAgICAgICAgJFRqa3MtPlJwSWh2ID0gJFJwSWh2OwoKICAgICAgICBoSVRwaG0gJFRqa3M7CiAgICB9CgogICAgKyoqCiAgICAgKiAwSVQgRSBlRXNJIFJwSWh2IGVwazlmSWgga21zVEVtRkkuCiAgICAgKgogICAgICogQGhJVHBobSBcQUtBdFxuRVRFZUVzSVxHcElodlxycGs5ZkloCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBUUXJFc0koKQogICAgewogICAgICAgIGhJVHBobSAkVGprcy0+RXFxOXZPRlFxSXMoKS0+SklUR3BJaHYoKTsKICAgIH0KCiAgICArKioKICAgICAqIDBJVCBUakkgaEk5RVRrUW1zamtxcyBlSWttSiBJRUpJaDl2IDlRRWZJZi4KICAgICAqCiAgICAgKiBAaElUcGhtIEVoaEV2CiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBKSVRnRUpJaDZRRWZzKCkKICAgIHsKICAgICAgICBoSVRwaG0gJFRqa3MtPklFSkloNlFFZjsKICAgIH0KCiAgICArKioKICAgICAqIE9JVCBUakkgaEk5RVRrUW1zamtxcyBlSWttSiBJRUpJaDl2IDlRRWZJZi4KICAgICAqCiAgICAgKiBAcUVoRWwgIEVoaEV2ICAkSUVKSWg2UUVmCiAgICAgKiBAaElUcGhtICRUamtzCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBzSVRnRUpJaDZRRWZzKEVoaEV2ICRJRUpJaDZRRWYpCiAgICB7CiAgICAgICAgJFRqa3MtPklFSkloNlFFZiA9ICRJRUpJaDZRRWY7CgogICAgICAgIGhJVHBobSAkVGprczsKICAgIH0KCiAgICArKioKICAgICAqIEttZmtGRVRJIFRqRVQgVGpJIEprVUltIGhJOUVUa1Ftc2prcXMgc2pRcDlmIG1RVCBlSSBJRUpJaDl2IDlRRWZJZi4KICAgICAqCiAgICAgKiBAcUVoRWwgIEVoaEV2ICAkaEk5RVRrUW1zCiAgICAgKiBAaElUcGhtICRUamtzCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSB1a1RqUXBUZ0VKSWg2UUVmKEVoaEV2ICRoSTlFVGtRbXMpCiAgICB7CiAgICAgICAgJGhJOUVUa1FtcyA9IEVoaEV2X2ZraWkoRWhoRXZfOEl2cygkVGprcy0+bFFmSTktPkpJVE5JOUVUa1FtcygpKSwgJGhJOUVUa1Ftcyk7CgogICAgICAgIGhJVHBobSAkVGprcy0+dWtUaigkaEk5RVRrUW1zKTsKICAgIH0KCiAgICArKioKICAgICAqIDI5cHNqIFRqSSBoSTlFVGtRbXNqa3FzIGVJa21KIElFSkloOXYgOVFFZklmLgogICAgICoKICAgICAqIEBoSVRwaG0gJFRqa3MKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIHVrVGpRcFRnRUpJaDZRRWZzKCkKICAgIHsKICAgICAgICBoSVRwaG0gJFRqa3MtPnNJVGdFSkloNlFFZnMoW10pOwogICAgfQoKICAgICsqKgogICAgICogMElUIFRqSSBmSWlFcDlUIDhJdiBtRWxJIFFpIFRqSSBURWU5SS4KICAgICAqCiAgICAgKiBAaElUcGhtIHNUaGttSgogICAgICorCiAgICBxaFFUSUZUSWYgaXBtRlRrUW0gZklpRXA5VDFJdkFFbEkoKQogICAgewogICAgICAgIGhJVHBobSAkVGprcy0+SklUM1FmSTkoKS0+SklUMUl2QUVsSSgpOwogICAgfQoKICAgICsqKgogICAgICogMElUIFRqSSBsUWZJOSBrbXNURW1GSSBlSWttSiBScEloa0lmLgogICAgICoKICAgICAqIEBoSVRwaG0gXEFLQXRcbkVURWVFc0lcZzlRUnBJbVRcM1FmSTl8c1RFVGtGCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBKSVQzUWZJOSgpCiAgICB7CiAgICAgICAgaElUcGhtICRUamtzLT5sUWZJOTsKICAgIH0KCiAgICArKioKICAgICAqIE9JVCBFIGxRZkk5IGttc1RFbUZJIGlRaCBUakkgbFFmSTkgZUlrbUogUnBJaGtJZi4KICAgICAqCiAgICAgKiBAcUVoRWwgIFxBS0F0XG5FVEVlRXNJXGc5UVJwSW1UXDNRZkk5ICAkbFFmSTkKICAgICAqIEBoSVRwaG0gJFRqa3MKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIHNJVDNRZkk5KDNRZkk5ICRsUWZJOSkKICAgIHsKICAgICAgICAkVGprcy0+bFFmSTkgPSAkbFFmSTk7CgogICAgICAgICRUamtzLT5ScElodi0+aWhRbCgkbFFmSTktPkpJVEhFZTlJKCkpOwoKICAgICAgICBoSVRwaG0gJFRqa3M7CiAgICB9CgogICAgKyoqCiAgICAgKiBHcEU5a2l2IFRqSSBKa1VJbSBGUTlwbG0gbUVsSSBldiBUakkgbFFmSTkncyBURWU5SS4KICAgICAqCiAgICAgKiBAcUVoRWwgIHNUaGttSnxcSzk5cGxrbUVUSVxvUW1UaEVGVHNcbkVURWVFc0lcR3BJaHZcZ1ZxaElzc2tRbSAgJEZROXBsbQogICAgICogQGhJVHBobSBzVGhrbUoKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIFJwRTlraXZvUTlwbG0oJEZROXBsbSkKICAgIHsKICAgICAgICAkRlE5cGxtID0gJEZROXBsbSBrbXNURW1GSVFpIGdWcWhJc3NrUW0gPyAkRlE5cGxtLT5KSVRCRTlwSSgkVGprcy0+SklUMGhFbGxFaCgpKSA6ICRGUTlwbG07CgogICAgICAgIGhJVHBobSAkVGprcy0+bFFmSTktPlJwRTlraXZvUTlwbG0oJEZROXBsbSk7CiAgICB9CgogICAgKyoqCiAgICAgKiBHcEU5a2l2IFRqSSBKa1VJbSBGUTlwbG1zIHVrVGogVGpJIGxRZkk5J3MgVEVlOUkuCiAgICAgKgogICAgICogQHFFaEVsICBFaGhFdnxcSzk5cGxrbUVUSVxvUW1UaEVGVHNcbkVURWVFc0lcR3BJaHZcZ1ZxaElzc2tRbSAgJEZROXBsbXMKICAgICAqIEBoSVRwaG0gRWhoRXYKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIFJwRTlraXZvUTlwbG1zKCRGUTlwbG1zKQogICAgewogICAgICAgIGhJVHBobSAkVGprcy0+bFFmSTktPlJwRTlraXZvUTlwbG1zKCRGUTlwbG1zKTsKICAgIH0KCiAgICArKioKICAgICAqIDBJVCBUakkgSmtVSW0gbEVGaFEgZXYgbUVsSS4KICAgICAqCiAgICAgKiBAcUVoRWwgIHNUaGttSiAgJG1FbEkKICAgICAqIEBoSVRwaG0gXG85UXNwaEkKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIEpJVDNFRmhRKCRtRWxJKQogICAgewogICAgICAgIGhJVHBobSB0aGg6OkpJVCgkVGprcy0+OVFGRTkzRUZoUXMsICRtRWxJKTsKICAgIH0KCiAgICArKioKICAgICAqIG9qSUY4cyBraSBFIGxFRmhRIGtzIGhJSmtzVEloSWYuCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUogICRtRWxJCiAgICAgKiBAaElUcGhtIGVRUTkKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIGpFczNFRmhRKCRtRWxJKQogICAgewogICAgICAgIGhJVHBobSBrc3NJVCgkVGprcy0+OVFGRTkzRUZoUXNbJG1FbEldKTsKICAgIH0KCiAgICArKioKICAgICAqIDBJVCBUakkgSmtVSW0gSjlRZUU5IGxFRmhRIGV2IG1FbEkuCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUogICRtRWxJCiAgICAgKiBAaElUcGhtIFxvOVFzcGhJCiAgICAgKisKICAgIHFwZTlrRiBzVEVUa0YgaXBtRlRrUW0gSklUMDlRZUU5M0VGaFEoJG1FbEkpCiAgICB7CiAgICAgICAgaElUcGhtIHRoaDo6SklUKHNURVRrRjo6JGxFRmhRcywgJG1FbEkpOwogICAgfQoKICAgICsqKgogICAgICogb2pJRjhzIGtpIEUgSjlRZUU5IGxFRmhRIGtzIGhJSmtzVEloSWYuCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUogICRtRWxJCiAgICAgKiBAaElUcGhtIGVRUTkKICAgICAqKwogICAgcXBlOWtGIHNURVRrRiBpcG1GVGtRbSBqRXMwOVFlRTkzRUZoUSgkbUVsSSkKICAgIHsKICAgICAgICBoSVRwaG0ga3NzSVQoc1RFVGtGOjokbEVGaFFzWyRtRWxJXSk7CiAgICB9CgogICAgKyoqCiAgICAgKiBudm1FbGtGRTk5diBFRkZJc3MgZXBrOWZJaCBxaFFWa0lzLgogICAgICoKICAgICAqIEBxRWhFbCAgc1Roa21KICAkOEl2CiAgICAgKiBAaElUcGhtIGxrVklmCiAgICAgKgogICAgICogQFRqaFF1cyBcZ1ZGSXFUa1FtCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBfX0pJVCgkOEl2KQogICAgewogICAgICAgIGtpIChrbV9FaGhFdigkOEl2LCBbJ1FoYmpJaEknLCAndWpJaElBUVQnLCAnUWhiakloSUFRVCddKSkgewogICAgICAgICAgICBoSVRwaG0gbUl1IFNrSmpJaE1oZklocnBrOWZJaGFoUVZ2KCRUamtzLCAkOEl2KTsKICAgICAgICB9CgogICAgICAgIGtpIChrbV9FaGhFdigkOEl2LCAkVGprcy0+cWhRcUloVHZhRXNzVGpocCkpIHsKICAgICAgICAgICAgaElUcGhtICRUamtzLT5UUXJFc0koKS0+eyQ4SXZ9OwogICAgICAgIH0KCiAgICAgICAgVGpoUXUgbUl1IGdWRklxVGtRbSgiYWhRcUloVHYgW3skOEl2fV0gZlFJcyBtUVQgSVZrc1QgUW0gVGpJIGc5UVJwSW1UIGVwazlmSWgga21zVEVtRkkuIik7CiAgICB9CgogICAgKyoqCiAgICAgKiBudm1FbGtGRTk5diBqRW1mOUkgRkU5OXMga21UUSBUakkgUnBJaHYga21zVEVtRkkuCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUogICRsSVRqUWYKICAgICAqIEBxRWhFbCAgRWhoRXYgICRxRWhFbElUSWhzCiAgICAgKiBAaElUcGhtIGxrVklmCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBfX0ZFOTkoJGxJVGpRZiwgJHFFaEVsSVRJaHMpCiAgICB7CiAgICAgICAga2kgKCRsSVRqUWYgPT09ICdsRUZoUScpIHsKICAgICAgICAgICAgJFRqa3MtPjlRRkU5M0VGaFFzWyRxRWhFbElUSWhzW3ddXSA9ICRxRWhFbElUSWhzW1hdOwoKICAgICAgICAgICAgaElUcGhtOwogICAgICAgIH0KCiAgICAgICAga2kgKCRUamtzLT5qRXMzRUZoUSgkbElUalFmKSkgewogICAgICAgICAgICBFaGhFdl9wbXNqa2lUKCRxRWhFbElUSWhzLCAkVGprcyk7CgogICAgICAgICAgICBoSVRwaG0gJFRqa3MtPjlRRkU5M0VGaFFzWyRsSVRqUWZdKC4uLiRxRWhFbElUSWhzKTsKICAgICAgICB9CgogICAgICAgIGtpIChzVEVUa0Y6OmpFczA5UWVFOTNFRmhRKCRsSVRqUWYpKSB7CiAgICAgICAgICAgICRGRTk5RWU5SSA9IHNURVRrRjo6JGxFRmhRc1skbElUalFmXTsKCiAgICAgICAgICAgIGtpICgkRkU5OUVlOUkga21zVEVtRklRaSBvOVFzcGhJKSB7CiAgICAgICAgICAgICAgICAkRkU5OUVlOUkgPSAkRkU5OUVlOUktPmVrbWZIUSgkVGprcywgc1RFVGtGOjpGOUVzcyk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGhJVHBobSAkRkU5OUVlOUkoLi4uJHFFaEVsSVRJaHMpOwogICAgICAgIH0KCiAgICAgICAga2kgKCRUamtzLT5qRXNBRWxJZk9GUXFJKCRsSVRqUWYpKSB7CiAgICAgICAgICAgIGhJVHBobSAkVGprcy0+RkU5OUFFbElmT0ZRcUkoJGxJVGpRZiwgJHFFaEVsSVRJaHMpOwogICAgICAgIH0KCiAgICAgICAga2kgKGttX0VoaEV2KHNUaFRROVF1SWgoJGxJVGpRZiksICRUamtzLT5xRXNzVGpocCkpIHsKICAgICAgICAgICAgaElUcGhtICRUamtzLT5UUXJFc0koKS0+eyRsSVRqUWZ9KC4uLiRxRWhFbElUSWhzKTsKICAgICAgICB9CgogICAgICAgICRUamtzLT5pUWh1RWhmb0U5OUhRKCRUamtzLT5ScElodiwgJGxJVGpRZiwgJHFFaEVsSVRJaHMpOwoKICAgICAgICBoSVRwaG0gJFRqa3M7CiAgICB9CgogICAgKyoqCiAgICAgKiBudm1FbGtGRTk5diBqRW1mOUkgRkU5OXMga21UUSBUakkgUnBJaHYga21zVEVtRkkuCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUogICRsSVRqUWYKICAgICAqIEBxRWhFbCAgRWhoRXYgICRxRWhFbElUSWhzCiAgICAgKiBAaElUcGhtIGxrVklmCiAgICAgKgogICAgICogQFRqaFF1cyBcckVmM0lUalFmb0U5OWdWRklxVGtRbQogICAgICorCiAgICBxcGU5a0Ygc1RFVGtGIGlwbUZUa1FtIF9fRkU5OU9URVRrRigkbElUalFmLCAkcUVoRWxJVElocykKICAgIHsKICAgICAgICBraSAoJGxJVGpRZiA9PT0gJ2xFRmhRJykgewogICAgICAgICAgICBzVEVUa0Y6OiRsRUZoUXNbJHFFaEVsSVRJaHNbd11dID0gJHFFaEVsSVRJaHNbWF07CgogICAgICAgICAgICBoSVRwaG07CiAgICAgICAgfQoKICAgICAgICBraSAoJGxJVGpRZiA9PT0gJ2xrVmttJykgewogICAgICAgICAgICBoSVRwaG0gc1RFVGtGOjpoSUprc1RJaDNrVmttKCRxRWhFbElUSWhzW3ddLCAkcUVoRWxJVEloc1tYXSA/PyBUaHBJKTsKICAgICAgICB9CgogICAgICAgIGtpICghIHNURVRrRjo6akVzMDlRZUU5M0VGaFEoJGxJVGpRZikpIHsKICAgICAgICAgICAgc1RFVGtGOjpUamhRdXJFZjNJVGpRZm9FOTlnVkZJcVRrUW0oJGxJVGpRZik7CiAgICAgICAgfQoKICAgICAgICAkRkU5OUVlOUkgPSBzVEVUa0Y6OiRsRUZoUXNbJGxJVGpRZl07CgogICAgICAgIGtpICgkRkU5OUVlOUkga21zVEVtRklRaSBvOVFzcGhJKSB7CiAgICAgICAgICAgICRGRTk5RWU5SSA9ICRGRTk5RWU5SS0+ZWttZkhRKG1wOTksIHNURVRrRjo6RjlFc3MpOwogICAgICAgIH0KCiAgICAgICAgaElUcGhtICRGRTk5RWU5SSguLi4kcUVoRWxJVElocyk7CiAgICB9CgogICAgKyoqCiAgICAgKiBOSUprc1RJaCBUakkgSmtVSW0gbGtWa20gdWtUaiBUakkgZXBrOWZJaC4KICAgICAqCiAgICAgKiBAcUVoRWwgIHNUaGttSiAgJGxrVmttCiAgICAgKiBAcUVoRWwgIGVRUTkgICRoSXE5RUZJCiAgICAgKiBAaElUcGhtIFVRa2YKICAgICAqKwogICAgcWhRVElGVElmIHNURVRrRiBpcG1GVGtRbSBoSUprc1RJaDNrVmttKCRsa1ZrbSwgJGhJcTlFRkkpCiAgICB7CiAgICAgICAgJGxJVGpRZnMgPSAobUl1IE5JaTlJRlRrUW1vOUVzcygkbGtWa20pKS0+SklUM0lUalFmcygKICAgICAgICAgICAgTklpOUlGVGtRbTNJVGpRZjo6S09fYVByNktvIHwgTklpOUlGVGtRbTNJVGpRZjo6S09fYU5NSGdvSGduCiAgICAgICAgKTsKCiAgICAgICAgaVFoSUVGaiAoJGxJVGpRZnMgRXMgJGxJVGpRZikgewogICAgICAgICAgICBraSAoJGhJcTlFRkkgfHwgISBzVEVUa0Y6OmpFczA5UWVFOTNFRmhRKCRsSVRqUWYtPm1FbEkpKSB7CiAgICAgICAgICAgICAgICBzVEVUa0Y6OmxFRmhRKCRsSVRqUWYtPm1FbEksICRsSVRqUWYtPmttVVE4SSgkbGtWa20pKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICArKioKICAgICAqIG85UW1JIFRqSSBnOVFScEltVCBScElodiBlcGs5ZkloLgogICAgICoKICAgICAqIEBoSVRwaG0gc1RFVGtGCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBGOVFtSSgpCiAgICB7CiAgICAgICAgaElUcGhtIEY5UW1JICRUamtzOwogICAgfQoKICAgICsqKgogICAgICogMlFoRkkgRSBGOVFtSSBRaSBUakkgcG1mSWg5dmttSiBScElodiBlcGs5ZkloIHVqSW0gRjlRbWttSi4KICAgICAqCiAgICAgKiBAaElUcGhtIFVRa2YKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIF9fRjlRbUkoKQogICAgewogICAgICAgICRUamtzLT5ScElodiA9IEY5UW1JICRUamtzLT5ScElodjsKICAgIH0KfQo=